(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["liquidations~21833f8f"],{"067b":function(e,t,c){},"241c6":function(e,t,c){},"3a6d":function(e,t,c){"use strict";c("d8e6")},"501c":function(e,t,c){"use strict";c("ef17")},5049:function(e,t,c){},"50a0":function(e,t,c){"use strict";var o=c("7a23"),n=c("70cb");const a={name:"Countdown"};var l=Object(o["defineComponent"])({...a,props:{startTime:{type:Number,default:0},endTime:{type:Number,default:0},ruler:{type:String,default:"mm:ss"}},emits:["onStop"],setup(e,{emit:t}){const c=e,a=Object(o["reactive"])({minutes:0,seconds:0,duration:"00:00"});let l=null;function i(e){clearInterval(l),r(e),l=setInterval(()=>{r(e),e<=0?(t("onStop"),clearInterval(l)):e-=1e3},1e3)}function r(e){const t=n["a"].duration(e);a.duration=t.format(c.ruler)}return Object(o["watchEffect"])(()=>{if(c.startTime&&c.endTime){const e=c.endTime-c.startTime;e>=0?i(e):t("onStop")}}),Object(o["onBeforeUnmount"])(()=>{l&&clearInterval(l)}),(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",null,Object(o["toDisplayString"])(a.duration),1))}}),i=(c("88c9"),c("6b0d")),r=c.n(i);const s=r()(l,[["__scopeId","data-v-3491b2e7"]]);t["a"]=s},"5eb3":function(e,t,c){"use strict";c.d(t,"a",(function(){return a})),c.d(t,"b",(function(){return l})),c.d(t,"c",(function(){return i}));var o=c("70cb"),n=c("60bb");function a(e,t="MMM DD, YYYY HH:mm"){if("Invalid Date"===e)return"";if(!Object(o["a"])(e).isValid())return"";const c=Object(o["a"])(e);let a=c.utcOffset(n["a"].value).format(t).trim();return a.endsWith(",")&&(a=a.replace(/,$/g,"")),a}function l(e){return Object(o["a"])(e).isValid()?Object(o["a"])(e).fromNow(!0):""}function i(e,t=0){const c=o["a"].duration(e),n=c.years(),a=c.months(),l=c.days(),i=c.hours(),r=c.minutes(),s={years:["y","year"],months:["m","month"],days:["d","day"],hours:["h","hour"],minutes:["m","minute"]},d=s["years"][t],b=s["months"][t],u=s["days"][t],O=s["hours"][t],j=s["minutes"][t];let p="";if(n>=1)return p=`${m(n,d)} ${m(a,b)}`,p;function m(e,c){return 0==e?"":(e>1&&0!=t&&(c+="s"),`${e} ${c}`)}return p=a>=1?`${m(a,b)} ${m(l,u)}`:l>=1?`${m(l,u)} ${m(i,O)}`:i>=1?`${m(i,O)} ${m(r,j)}`:r>=1?""+m(r,j):"<1 minute",p}},"88c9":function(e,t,c){"use strict";c("067b")},ab3e:function(e,t,c){"use strict";c("5049")},b3c6:function(e,t,c){"use strict";c("241c6")},d1c5:function(e,t,c){"use strict";c.d(t,"b",(function(){return i})),c.d(t,"a",(function(){return r})),c.d(t,"e",(function(){return s})),c.d(t,"f",(function(){return d})),c.d(t,"d",(function(){return b})),c.d(t,"c",(function(){return u}));var o=c("75c6"),n=c("fae1"),a=c("f44d"),l=c("aeba");async function i(e){const t={query:`{\n      providers(poolId: "${e}")\n      traders(poolId: "${e}")\n    }`},c=await Object(a["a"])(t);return null===c||void 0===c?void 0:c.data}function r(e,t){return n["a"].get(`${o["a"].apiUrl}/activity?position_address=${e}&user_type=${t}`)}function s(e){return n["a"].post(o["a"].apiUrl+"/activity",e)}async function d(e,t){const c={tx_hash:"",op_type:"Watching",account_address:l["a"].value,sign:e,position_address:t};await s(c)}function b(e,t,c,o){const n=Math.floor(1e6*Math.random()),a={op_type:"Ordering",tx_hash:"",account_address:l["a"].value,sign:n,position_address:e,bid_size:t,estimate_rewards:c,user_type:o};return s(a),n}async function u(e,t,c,o,n,a){const i={op_type:"Ordered",account_address:l["a"].value,sign:e,position_address:t,tx_hash:c,bid_size:o,estimate_rewards:n,user_type:a};await s(i)}},d8e6:function(e,t,c){},e06e:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),n=c("aeba"),a=c("da92"),l=c("50a0");const i={class:"flex-center-v",style:{"justify-content":"flex-end"}};var r=Object(o["defineComponent"])({__name:"GoDetailBtn",props:{liquidation:{type:Object,default:()=>{}}},setup(e){const t=e;function c(){window.open("/liquidations/"+t.liquidation.hash)}return(e,t)=>{const n=Object(o["resolveComponent"])("shorterButton");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createVNode"])(n,{class:"large",onClick:c},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("Detail")]),_:1})])}}});const s=r;var d=s,b=c("c39f"),u=c("2759"),O=c("626f"),j=c("98fe"),p=c("0316"),m=c("b377"),h=c("619a"),k=c("0c61");const f=e=>(Object(o["pushScopeId"])("data-v-651a761a"),e=e(),Object(o["popScopeId"])(),e),g={class:"panel liquidations-table"},y={class:"form-control"},v={class:"form-control"},V={class:"table-skeleton-top"},N={class:"table-skeleton"},E={key:0,class:"table"},B={class:"shorter-table legacy-table"},w=f(()=>Object(o["createElementVNode"])("thead",{class:"table-header"},[Object(o["createElementVNode"])("th",null,"Position Hash"),Object(o["createElementVNode"])("th",null,"Position Info"),Object(o["createElementVNode"])("th",null,[Object(o["createElementVNode"])("div",{class:"custom-t-header"},[Object(o["createElementVNode"])("p",null,"Avg. Open Price/"),Object(o["createElementVNode"])("p",null,"Liq. Price")])]),Object(o["createElementVNode"])("th",null,"Phase 1 (USDs Auction)%"),Object(o["createElementVNode"])("th",null,"Closes in"),Object(o["createElementVNode"])("th")],-1)),S={key:0,class:"coin"},C={class:"color-gray"},x={key:1},P={key:0},T={class:"color-gray"},q={key:1},L={key:0},I={class:"color-gray"},D={key:1},_={class:"shorter-icon","aria-hidden":"true",style:{"margin-right":"5px"}},M=f(()=>Object(o["createElementVNode"])("use",{"xlink:href":"#icon-countdown"},null,-1)),z=[M];var F=Object(o["defineComponent"])({__name:"ClosingPositions",setup(e){const t=Object(o["reactive"])({hash:"",token:""}),c=Object(o["reactive"])({loading:{fetchClosingPositionsHashList:!0,fetchLiquidations:!0},liquidations:[]});async function i(){try{c.loading.fetchLiquidations=!0;const e=await s(),t=[...e].reverse(),o=await j["b"](t),n=await j["c"](o);c.liquidations=await Promise.all(n.map(r))}finally{c.loading.fetchLiquidations=!1}}async function r(e){const t=e.positionInfoMap.totalSize,{stakedToken:c,leverage:o}=e.poolInfo||{},n=await b["c"](c),{endTime:l,phase:i}=await f(e.positionBlocks.closingBlock),{avgOpenPrice:r,liqPrice:s}=await O["c"]({hash:e.hash,strToken:e.strToken,unsettledCash:e.positionInfoMap.unsettledCash,leverage:o,totalSize:t,fundingFee:e.fundingFee});return e.phase1Infos.bidSize=Math.min(e.phase1Infos.bidSize,t),e.phase1Infos.phase1ActionPercent=a["a"].divide(e.phase1Infos.bidSize,t),e.symbol=Object(k["g"])(e.poolInfo.stakedToken,e.symbol),{...e,tokenLogo:n,totalSize:t,avgOpenPrice:r,liqPrice:s,endTime:l,phase:i}}async function s(){try{c.loading.fetchClosingPositionsHashList=!0;const e=await u["j"](2);return e}catch(e){return[]}finally{c.loading.fetchClosingPositionsHashList=!1}}async function f(e){const t=await Object(m["c"])();let c=e+p["a"],o=1;t-e>p["a"]&&(c+=p["b"],o=2);const n=await Object(m["b"])(c,"MMM DD, YYYY HH:mm:ss");return{endTime:n,phase:o}}const M=Object(o["computed"])(()=>{let e=c.liquidations||[];return!t.hash&&!t.token||c.loading.fetchLiquidations||(t.hash&&(e=e.filter(e=>{const c=new RegExp(t.hash,"gi");if(c.test(e.hash))return e})),t.token&&(e=e.filter(e=>{const c=new RegExp(t.token,"gi");if(c.test(e.symbol))return e}))),e});return Object(o["onBeforeMount"])(()=>{i()}),Object(o["watch"])(()=>n["b"].id,()=>{i()}),Object(o["onUnmounted"])(()=>{t.hash="",t.token=""}),(e,n)=>{const i=Object(o["resolveComponent"])("shorterSkeletonItem"),r=Object(o["resolveComponent"])("shorterSkeleton"),s=Object(o["resolveComponent"])("Copy"),b=Object(o["resolveComponent"])("Image"),u=Object(o["resolveComponent"])("SmartNumber"),O=Object(o["resolveComponent"])("Empty");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createElementVNode"])("form",{class:"form form-search",onSubmit:n[2]||(n[2]=Object(o["withModifiers"])(()=>{},["prevent"]))},[Object(o["createElementVNode"])("div",y,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>t.hash=e),style:{width:"418px"},placeholder:"Position Hash"},null,512),[[o["vModelText"],t.hash]])]),Object(o["createElementVNode"])("div",v,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>t.token=e),style:{width:"280px"},placeholder:"Search Token"},null,512),[[o["vModelText"],t.token]])])],32),Object(o["createVNode"])(r,{loading:c.loading.fetchLiquidations},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",V,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(r,{key:e},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",N,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(i,{key:e,style:{height:"26px",width:"13%"}})),64))])]),_:2},1024)),64))])]),default:Object(o["withCtx"])(()=>{var e;return[(null===(e=Object(o["unref"])(M))||void 0===e?void 0:e.length)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",E,[Object(o["createElementVNode"])("table",B,[w,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(M),(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:"legacyBidList_"+t},[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(s,{modelValue:e.hash,"onUpdate:modelValue":t=>e.hash=t},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(h["c"])(e.hash)),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",x,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",S,[Object(o["createVNode"])(b,{class:"coin-icon",src:e.tokenLogo,circle:""},null,8,["src"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.symbol),1),Object(o["createElementVNode"])("small",C,[Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(e.poolInfo.leverage)+"×) ",1),Object(o["createVNode"])(u,{prefix:"-",type:"quantity",value:e.positionInfoMap.totalSize},null,8,["value"])])])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",q,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",P,[Object(o["createElementVNode"])("p",null,[Object(o["createVNode"])(u,{type:"price",value:e.avgOpenPrice},null,8,["value"])]),Object(o["createElementVNode"])("small",T,[Object(o["createVNode"])(u,{type:"price",value:e.liqPrice},null,8,["value"])])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",L,[Object(o["createElementVNode"])("p",null,[Object(o["createVNode"])(u,{type:"quantity",value:2===e.phase?e.phase1Infos.bidSize:0},null,8,["value"]),Object(o["createTextVNode"])("  ("+Object(o["toDisplayString"])(2===e.phase?Object(o["unref"])(h["k"])(100*e.phase1Infos.phase1ActionPercent):0)+"%) ",1)]),Object(o["createElementVNode"])("small",I," /"+Object(o["toDisplayString"])(2===e.phase?Object(o["unref"])(h["d"])(Object(o["unref"])(a["a"]).times(e.phase1Infos.bidSize,e.phase1Infos.liquidationPrice)):0),1)]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",_,z)),Object(o["createVNode"])(l["a"],{"start-time":(new Date).getTime(),"end-time":new Date(e.endTime).getTime()},null,8,["start-time","end-time"])],64))]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(d,{liquidation:e,"btn-text":"Liquidate"},null,8,["liquidation"])])]))),128))])])])):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1,content:"No liquidations yet"}))]}),_:1},8,["loading"])])}}}),H=(c("b3c6"),c("6b0d")),Y=c.n(H);const U=Y()(F,[["__scopeId","data-v-651a761a"]]);var $=U,R=c("05ac"),A=c("60bb"),J=c("5eb3");const W=e=>(Object(o["pushScopeId"])("data-v-783c254f"),e=e(),Object(o["popScopeId"])(),e),G={class:"panel liquidations-table legacy"},K={class:"form-control"},Q={class:"form-control"},X={class:"table-skeleton-top"},Z={class:"table-skeleton"},ee={key:0,class:"shorter-table table"},te={class:"table-header"},ce=W(()=>Object(o["createElementVNode"])("th",null,"Position Hash",-1)),oe=W(()=>Object(o["createElementVNode"])("th",null,"Position Info",-1)),ne=W(()=>Object(o["createElementVNode"])("th",null,[Object(o["createElementVNode"])("div",{class:"custom-t-header"},[Object(o["createElementVNode"])("p",null,"Avg. Open Price/"),Object(o["createElementVNode"])("p",null,"Liq. Price")])],-1)),ae=W(()=>Object(o["createElementVNode"])("th",null,"Debt Coverage (%)",-1)),le=W(()=>Object(o["createElementVNode"])("th",null,"Unsettled",-1)),ie=W(()=>Object(o["createElementVNode"])("th",null,null,-1)),re={key:0,class:"coin"},se={class:"color-gray"},de={key:1},be={key:0},ue={class:"color-gray"},Oe={key:1},je={key:0},pe=["title"],me={class:"color-gray"},he={key:1},ke={key:0},fe={key:1},ge={key:0},ye={class:"color-gray"},ve={key:1},Ve={key:0,class:"load-more"};var Ne=Object(o["defineComponent"])({__name:"LiquidationsLegacy",setup(e){const t=Object(o["reactive"])({hash:"",token:""}),c=Object(o["reactive"])({loading:{fetchLegacyPositionHashList:!0,fetchLiquidations:!0},liquidations:[],pagination:{pageSize:10,currentPage:1,totalPage:0,totalCount:0}}),l=Object(o["computed"])(()=>!c.loading.fetchLiquidations&&(!t.hash&&!t.token&&!!(c.pagination.currentPage<c.pagination.totalPage&&c.pagination.totalCount)));async function i(){try{c.loading.fetchLiquidations=!0;const e=await s()||[],t=await j["b"](e,4);t.sort((e,t)=>e.positionBlocks&&t.positionBlocks?t.positionBlocks.overdrawnBlock-e.positionBlocks.overdrawnBlock:0);const o=await j["g"](t)||[];f(o.length),c.liquidations=await Promise.all(o.map(r))}finally{c.loading.fetchLiquidations=!1}}async function r(e){const{hash:t,strToken:c,fundingFee:o}=e||{},{stakedToken:n,leverage:l}=e.poolInfo||{},{bidSize:i}=e.legacyInfos||{},{totalSize:r,unsettledCash:s}=e.positionInfoMap||{};e.symbol=Object(k["g"])(e.poolInfo.stakedToken,e.symbol);const d=Math.min(a["a"].divide(i,r),1),u=await b["c"](n),j=await Object(m["b"])(e.positionBlocks.overdrawnBlock,"MMM DD, YYYY HH:mm:ss"),{avgOpenPrice:p,liqPrice:h}=await O["c"]({hash:t,strToken:c,unsettledCash:s,leverage:l,totalSize:r,fundingFee:o});return{...e,avgOpenPrice:p,liqPrice:h,debtPercent:d,endTime:j,tokenLogo:u,unsettledCashRemain:s}}async function s(){try{c.loading.fetchLegacyPositionHashList=!0;const e=await u["j"](4);return e}finally{c.loading.fetchLegacyPositionHashList=!1}}i(),Object(o["onBeforeMount"])(()=>{i()}),Object(o["watch"])(()=>n["b"].id,()=>{c.liquidations=[],i()});const p=Object(o["computed"])(()=>{let e=c.liquidations||[];return e.length?(e=e.map(e=>{const t=e.positionBlocks;return 0===t.closingBlock||t.overdrawnBlock-t.closingBlock<220?e.legacyReason="Overdrawn":e.legacyReason="Aborted",e}),t.hash&&(e=e.filter(e=>{const c=new RegExp(t.hash,"gi");if(c.test(e.hash))return e})),t.token&&(e=e.filter(e=>{const c=new RegExp(t.token,"gi");if(c.test(e.symbol))return e})),e=e.slice(0,c.pagination.currentPage*c.pagination.pageSize),e):[]});function f(e=0){c.pagination.totalCount=e,c.pagination.totalPage=Math.ceil(e/c.pagination.pageSize)}return Object(o["onUnmounted"])(()=>{t.hash="",t.token=""}),(e,n)=>{const a=Object(o["resolveComponent"])("shorterSkeletonItem"),i=Object(o["resolveComponent"])("shorterSkeleton"),r=Object(o["resolveComponent"])("Copy"),s=Object(o["resolveComponent"])("Image"),b=Object(o["resolveComponent"])("SmartNumber"),u=Object(o["resolveComponent"])("Tag"),O=Object(o["resolveComponent"])("Empty");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[Object(o["createElementVNode"])("form",{class:"form form-search",onSubmit:n[2]||(n[2]=Object(o["withModifiers"])(()=>{},["prevent"]))},[Object(o["createElementVNode"])("div",K,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>t.hash=e),style:{width:"418px"},placeholder:"Position Hash"},null,512),[[o["vModelText"],t.hash]])]),Object(o["createElementVNode"])("div",Q,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>t.token=e),style:{width:"280px"},placeholder:"Search Token"},null,512),[[o["vModelText"],t.token]])])],32),Object(o["createVNode"])(i,{loading:c.loading.fetchLiquidations},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",X,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(i,{key:e},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Z,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(a,{key:e,style:{height:"26px",width:"13%"}})),64))])]),_:2},1024)),64))])]),default:Object(o["withCtx"])(()=>[Object(o["unref"])(p).length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("table",ee,[Object(o["createElementVNode"])("thead",te,[ce,oe,ne,ae,le,Object(o["createElementVNode"])("th",null,"Changed on ("+Object(o["toDisplayString"])(Object(o["unref"])(A["a"]).text)+")",1),ie]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(p),(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:"legacyList_"+t},[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(r,{modelValue:e.hash,"onUpdate:modelValue":t=>e.hash=t},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(h["c"])(e.hash)),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",de,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",re,[Object(o["createVNode"])(s,{class:"coin-icon",src:e.tokenLogo,circle:""},null,8,["src"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.symbol),1),Object(o["createElementVNode"])("small",se,[Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(e.poolInfo.leverage)+"×) ",1),Object(o["createVNode"])(b,{prefix:"-",type:"quantity",value:e.positionInfoMap.totalSize},null,8,["value"])])])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Oe,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",be,[Object(o["createElementVNode"])("p",null,[Object(o["createVNode"])(b,{type:"price",value:e.avgOpenPrice},null,8,["value"])]),Object(o["createElementVNode"])("small",ue,[Object(o["createVNode"])(b,{type:"price",value:e.liqPrice},null,8,["value"])])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",he,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("span",{class:"long-number",title:e.legacyInfos.bidSize},[Object(o["createVNode"])(b,{type:"quantity",value:e.legacyInfos.bidSize},null,8,["value"])],8,pe),Object(o["createElementVNode"])("span",null,"("+Object(o["toDisplayString"])(1*e.debtPercent>0?Object(o["unref"])(h["k"])(100*e.debtPercent)+"%":"0%")+")",1)]),Object(o["createElementVNode"])("small",me,"/"+Object(o["toDisplayString"])(Object(o["unref"])(h["i"])(e.legacyInfos.usedCash)),1),Object(o["createVNode"])(u,{style:{"margin-left":"3px"}},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(R["a"])().usdToken),1)]),_:1})]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",fe,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ke,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(h["d"])(e.unsettledCashRemain,2,!0))+" ",1),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(R["a"])().usdToken),1)]),_:1})]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchLiquidations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ve,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ge,[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.legacyReason),1)]),_:2},1024),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.endTime?Object(o["unref"])(J["a"])(e.endTime,"HH:mm:ss"):"-"),1),Object(o["createElementVNode"])("small",ye,Object(o["toDisplayString"])(e.endTime?Object(o["unref"])(J["a"])(e.endTime,"MMM DD, YYYY"):"-"),1)]))]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(d,{liquidation:e,"btn-text":"Liquidate"},null,8,["liquidation"])])]))),128))])])):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1,content:"No liquidations yet"}))]),_:1},8,["loading"]),Object(o["unref"])(l)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("footer",Ve,[Object(o["createElementVNode"])("span",{onClick:n[3]||(n[3]=e=>c.pagination.currentPage+=1)},"Load More")])):Object(o["createCommentVNode"])("",!0)])}}});c("3a6d");const Ee=Y()(Ne,[["__scopeId","data-v-783c254f"]]);var Be=Ee;c("14d9");const we=e=>(Object(o["pushScopeId"])("data-v-0a0c0009"),e=e(),Object(o["popScopeId"])(),e),Se={class:"panel liquidations-table finished"},Ce={class:"form-control"},xe={class:"form-control"},Pe={class:"table-skeleton-top"},Te={class:"table-skeleton"},qe={key:0,class:"shorter-table table"},Le={class:"table-header"},Ie=we(()=>Object(o["createElementVNode"])("th",null,"Position Hash",-1)),De=we(()=>Object(o["createElementVNode"])("th",null,"Position Info",-1)),_e=we(()=>Object(o["createElementVNode"])("th",null,"Last State",-1)),Me=we(()=>Object(o["createElementVNode"])("th",null,"Phase 1 (USDs Auction)",-1)),ze=we(()=>Object(o["createElementVNode"])("th",null,"Phase 2 (Dex Cover)",-1)),Fe=we(()=>Object(o["createElementVNode"])("th",null,null,-1)),He={key:0,class:"coin"},Ye={class:"color-gray"},Ue={key:1},$e={key:0},Re={key:1},Ae={key:0,class:"phase-2"},Je=we(()=>Object(o["createElementVNode"])("svg",{class:"shorter-icon","aria-hidden":"true"},[Object(o["createElementVNode"])("use",{"xlink:href":"#icon-substitution"})],-1)),We={class:"rt"},Ge={class:"color-gray"},Ke={key:1},Qe={key:0,class:"phase-2"},Xe=we(()=>Object(o["createElementVNode"])("svg",{class:"shorter-icon","aria-hidden":"true"},[Object(o["createElementVNode"])("use",{"xlink:href":"#icon-substitution"})],-1)),Ze={class:"rt"},et={class:"color-gray"},tt={key:1},ct={key:0},ot={class:"color-gray"},nt={key:1},at={key:0,class:"load-more"};var lt=Object(o["defineComponent"])({__name:"LiquidationsFinished",setup(e){const t=Object(o["reactive"])({hash:"",token:""}),c=Object(o["reactive"])({loading:{fetchFinishedPositions:!0,loadMore:!1},hashList:[],liquidations:[],pagination:{pageSize:20,loadSize:50,currentPage:1,totalPage:0,loadPage:0,totalNumber:0,totalCount:0}}),l=Object(o["computed"])(()=>!c.loading.fetchFinishedPositions&&(!t.hash&&!t.token&&!!(c.pagination.currentPage<c.pagination.totalNumber&&c.pagination.totalCount||c.loading.loadMore))),i=Object(o["computed"])(()=>{let e=c.liquidations||[];return e.length?(!t.hash&&!t.token||c.loading.fetchFinishedPositions||(t.hash&&(e=e.filter(e=>{const c=new RegExp(t.hash,"gi");if(c.test(e.hash))return e})),t.token&&(e=e.filter(e=>{const c=new RegExp(t.token,"gi");if(c.test(e.symbol))return e}))),e):[]});function r(){c.pagination.currentPage>c.pagination.totalNumber||(c.loading.loadMore=!0,setTimeout(()=>{c.pagination.currentPage+=1,c.loading.loadMore=!1},500))}async function s(){const e=[];for(let n=1;n<=c.pagination.loadPage;n++)e.push(O(n,c.pagination.loadSize));const t=await Promise.all(e),o=t.flat().sort((e,t)=>e.positionBlocks&&t.positionBlocks?t.positionBlocks.closedBlock-e.positionBlocks.closedBlock:0);c.liquidations=o,v(c.liquidations.length),c.loading.fetchFinishedPositions=!1}async function O(e,t){const o=(e-1)*t,n=c.hashList.concat().splice(o,t),a=await j["b"](n,8);a.sort((e,t)=>e.positionBlocks&&t.positionBlocks?t.positionBlocks.closedBlock-e.positionBlocks.closedBlock:0);const l=await p(a);return l}async function p(e){const t=await j["d"](e);return await Promise.all(t.map(async e=>{const{closedBlock:t,overdrawnBlock:c}=e.positionBlocks||{},o=await Object(m["b"])(t,"MMM DD, YYYY HH:mm:ss"),n=await b["c"](e.poolInfo.stakedToken);return e.phase1Infos.bidSize=Math.min(e.phase1Infos.bidSize,e.positionInfoMap.totalSize),e.symbol=Object(k["g"])(e.poolInfo.stakedToken,e.symbol),{...e,endTime:o,tokenLogo:n,lastState:g(e.phase1Infos.flag,c)}}))}async function f(){try{const e=await u["j"](8);c.hashList=e||[],y(c.hashList.length)}catch(e){c.hashList=[]}}function g(e=!1,t=0){return t>0?"Legacy":e?"Phase 1":"Phase 2"}function y(e=0){c.pagination.totalCount=e,c.pagination.totalPage=Math.ceil(e/c.pagination.pageSize),c.pagination.loadPage=Math.ceil(e/c.pagination.loadSize)}function v(e=0){c.pagination.totalCount=length,c.pagination.totalNumber=Math.ceil(e/c.pagination.pageSize)}return Object(o["watch"])(()=>n["b"].id,async()=>{c.loading.fetchFinishedPositions=!0,await f(),c.liquidations=[],s()}),Object(o["onBeforeMount"])(async()=>{c.loading.fetchFinishedPositions=!0,await f(),s()}),Object(o["onUnmounted"])(()=>{t.hash="",t.token=""}),(e,n)=>{const s=Object(o["resolveComponent"])("shorterSkeletonItem"),b=Object(o["resolveComponent"])("shorterSkeleton"),u=Object(o["resolveComponent"])("Copy"),O=Object(o["resolveComponent"])("Image"),j=Object(o["resolveComponent"])("SmartNumber"),p=Object(o["resolveComponent"])("Tag"),m=Object(o["resolveComponent"])("Empty"),k=Object(o["resolveComponent"])("Loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Se,[Object(o["createElementVNode"])("form",{class:"form form-search",onSubmit:n[2]||(n[2]=Object(o["withModifiers"])(()=>{},["prevent"]))},[Object(o["createElementVNode"])("div",Ce,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>t.hash=e),style:{width:"418px"},placeholder:"Position Hash"},null,512),[[o["vModelText"],t.hash]])]),Object(o["createElementVNode"])("div",xe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>t.token=e),style:{width:"280px"},placeholder:"Search Token"},null,512),[[o["vModelText"],t.token]])])],32),Object(o["createVNode"])(b,{loading:c.loading.fetchFinishedPositions},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Pe,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(b,{key:e},{template:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Te,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(6,e=>Object(o["createVNode"])(s,{key:e,style:{height:"26px",width:"13%"}})),64))])]),_:2},1024)),64))])]),default:Object(o["withCtx"])(()=>[Object(o["unref"])(i).slice(0,c.pagination.currentPage*c.pagination.pageSize).length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("table",qe,[Object(o["createElementVNode"])("thead",Le,[Ie,De,_e,Me,ze,Object(o["createElementVNode"])("th",null,"Finished on ("+Object(o["toDisplayString"])(Object(o["unref"])(A["a"]).text)+")",1),Fe]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(i).slice(0,c.pagination.currentPage*c.pagination.pageSize),(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:"legacyList_"+t},[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(u,{modelValue:e.hash,"onUpdate:modelValue":t=>e.hash=t},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(h["c"])(e.hash)),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),Object(o["createElementVNode"])("td",null,[c.loading.fetchFinishedPositions?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ue,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",He,[Object(o["createVNode"])(O,{class:"coin-icon",src:e.tokenLogo,circle:""},null,8,["src"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.symbol),1),Object(o["createElementVNode"])("small",Ye,[Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(e.poolInfo.leverage)+"×) ",1),Object(o["createVNode"])(j,{prefix:"-",type:"quantity",value:e.positionInfoMap.totalSize},null,8,["value"])])])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchFinishedPositions?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$e,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Re,Object(o["toDisplayString"])(e.lastState),1))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchFinishedPositions?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ke,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ae,[Je,Object(o["createElementVNode"])("div",We,[Object(o["createElementVNode"])("p",null,["Legacy"===e.lastState?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])("0")],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,type:"quantity",value:Object(o["unref"])(a["a"]).times(e.phase1Infos.bidSize,e.phase1Infos.liquidationPrice)},null,8,["value"])),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(R["a"])().usdToken),1)]),_:1})]),Object(o["createElementVNode"])("small",Ge,["Legacy"===e.lastState?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])("0")],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,type:"quantity",value:e.phase1Infos.bidSize},null,8,["value"]))]),Object(o["createVNode"])(p,{style:{"margin-left":"3px"}},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.symbol),1)]),_:2},1024)])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchFinishedPositions?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",tt,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Qe,[Xe,Object(o["createElementVNode"])("div",Ze,[Object(o["createElementVNode"])("p",null,["Legacy"===e.lastState?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])("0")],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,type:"quantity",value:e.phase2Infos.usedCash},null,8,["value"])),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(R["a"])().usdToken),1)]),_:1})]),Object(o["createElementVNode"])("small",et,["Legacy"===e.lastState?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])("0")],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,type:"quantity",value:e.phase2Infos.debtSize},null,8,["value"]))]),Object(o["createVNode"])(p,{style:{"margin-left":"3px"}},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.symbol),1)]),_:2},1024)])]))]),Object(o["createElementVNode"])("td",null,[c.loading.fetchFinishedPositions?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",nt,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ct,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(Object(o["unref"])(J["a"])(e.endTime,"HH:mm:ss")),1),Object(o["createElementVNode"])("small",ot,Object(o["toDisplayString"])(Object(o["unref"])(J["a"])(e.endTime,"MMM DD, YYYY")),1)]))]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(d,{liquidation:e,"btn-text":"Detail"},null,8,["liquidation"])])]))),128))])])):(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,content:"No liquidations yet"}))]),_:1},8,["loading"]),Object(o["unref"])(l)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("footer",at,[Object(o["withDirectives"])(Object(o["createVNode"])(k,null,null,512),[[o["vShow"],c.loading.loadMore]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{onClick:n[3]||(n[3]=e=>r())},"Load More",512),[[o["vShow"],!c.loading.loadMore]])])):Object(o["createCommentVNode"])("",!0)])}}});c("501c");const it=Y()(lt,[["__scopeId","data-v-0a0c0009"]]);var rt=it;const st=e=>(Object(o["pushScopeId"])("data-v-3fd37ab4"),e=e(),Object(o["popScopeId"])(),e),dt=st(()=>Object(o["createElementVNode"])("h2",{class:"title"},"Liquidations",-1)),bt={class:"subtitle"},ut={key:0,class:"subtitle-content"},Ot={key:0,href:"/governance",class:"shorter-hover-link"};var jt=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["reactive"])({curTab:0,current:""}),c=Object(o["computed"])(()=>!(!n["a"].value||n["a"].isRuler));return(e,a)=>{const l=Object(o["resolveComponent"])("TabItem"),i=Object(o["resolveComponent"])("Tabs"),r=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(r,null,{title:Object(o["withCtx"])(()=>[dt,Object(o["createElementVNode"])("div",bt,[Object(o["unref"])(c)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ut,[Object(o["createTextVNode"])(" Only Rulers are eligible for liquidation. "),Object(o["unref"])(n["k"]).isConnected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",Ot,"Become a Ruler →")):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{modelValue:t.curTab,"onUpdate:modelValue":a[0]||(a[0]=e=>t.curTab=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{title:"Closing Positions"}),Object(o["createVNode"])(l,{title:"Legacy"}),Object(o["createVNode"])(l,{title:"Finished"})]),_:1},8,["modelValue"]),Object(o["withDirectives"])(Object(o["createVNode"])($,null,null,512),[[o["vShow"],0==t.curTab]]),Object(o["withDirectives"])(Object(o["createVNode"])(Be,null,null,512),[[o["vShow"],1==t.curTab]]),Object(o["withDirectives"])(Object(o["createVNode"])(rt,null,null,512),[[o["vShow"],2==t.curTab]])]),_:1})}}});c("ab3e");const pt=Y()(jt,[["__scopeId","data-v-3fd37ab4"]]);t["default"]=pt},ef17:function(e,t,c){},f44d:function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));var o=c("fae1"),n=c("05ac");function a(e){return o["a"].post(Object(n["a"])().graphqlUrl,e)}}}]);