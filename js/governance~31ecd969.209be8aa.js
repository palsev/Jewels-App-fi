(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["governance~31ecd969"],{"0548":function(e,t,a){"use strict";a("543f")},"0c89":function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return d})),a.d(t,"g",(function(){return b}));a("13d5");var c=a("e36d"),o=a("f44d");async function l(){const e={query:"{\n      rulers\n    }"},t=await Object(o["a"])(e),a=t.data.rulers;return a}async function n(){var e;const t={query:"{\n      getProposalIdInfo {\n        proposalId\n        proposer\n        blockNumber\n      }\n    }"},a=await Object(o["a"])(t),c=((null===(e=a.data)||void 0===e?void 0:e.getProposalIdInfo)||[]).map(e=>({id:e.proposalId,...e})),l=_.uniqBy(c,e=>e.id);return l}async function r(){const e={query:"{\n      getRuler\n    }"},t=await Object(o["a"])(e),a=t.data.getRuler;return a}async function s(){var e;const t={query:"{\n      getProposalChangedInfo {\n        proposalId\n        lastChangedBlockNumber\n      }\n    }"},a=await Object(o["a"])(t),c=((null===(e=a.data)||void 0===e?void 0:e.getProposalChangedInfo)||[]).map(e=>({blockNumber:e.lastChangedBlockNumber,...e}));return c}async function i(e){var t;const a={query:`{\n      getVoteInfoByAccount(account: "${e}") {\n        proposalId\n        user\n        direction\n        voteShare\n      }\n    }`},c=await Object(o["a"])(a),l=((null===(t=c.data)||void 0===t?void 0:t.getVoteInfoByAccount)||[]).map(e=>({...e}));return l}async function d(e){const t=await i(e),a={};for(const l of t){const e=l.proposalId;a[e]=a[e]?a[e]+1:1}const c=Object.values(a),o=c.reduce((e,t)=>e+t,0);return o}async function b(e){var t;const a={query:`{\n      getVoteInfoByProposalId(proposalId: "${e}") {\n        user\n        direction\n        voteShare\n        blockNumber\n      }\n    }`},l=await Object(o["a"])(a),n=((null===(t=l.data)||void 0===t?void 0:t.getVoteInfoByProposalId)||[]).map(t=>({proposalId:e,account:t.user,share:t.voteShare,share_big:c["a"].from(t.voteShare),...t}));return n}},"126b":function(e,t,a){"use strict";a("14d9");var c=a("7a23"),o=a("58c9"),l=a("c89c"),n=a("6605");const r={key:0,class:"proposal-list"},s=["onClick"],i={class:"content"},d={class:"message"},b={class:"sponsor"},u=["innerHTML"];var p=Object(c["defineComponent"])({__name:"ProposalList",props:{proposalList:{type:Array,default:()=>[]}},setup(e){const t=Object(n["e"])(),a=Object(n["d"])();function p(e){t.push({name:"ProposalDetail",params:{id:e},query:a.query})}return(t,a)=>{const n=Object(c["resolveComponent"])("Tag"),j=Object(c["resolveComponent"])("Empty");return e.proposalList.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",r,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.proposalList,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t,class:"proposal-item",onClick:t=>p(e.id)},[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",d,Object(c["toDisplayString"])(Object(c["unref"])(o["b"])(e.tokenName,e.leverage)),1),Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(n,{class:"tag"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(o["e"])(e.tag)),1)]),_:2},1024),Object(c["createElementVNode"])("div",{class:"date",innerHTML:Object(c["unref"])(o["a"])(e.status,e.lastTime)},null,8,u)])]),Object(c["createVNode"])(l["a"],{status:Object(c["unref"])(o["f"])(e.status).toLowerCase()},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(o["f"])(e.status)),1)]),_:2},1032,["status"])],8,s))),128))])):(Object(c["openBlock"])(),Object(c["createBlock"])(j,{key:1,content:"No proposals yet"}))}}}),j=(a("8bf3"),a("6b0d")),O=a.n(j);const m=O()(p,[["__scopeId","data-v-5b23e5d8"]]);t["a"]=m},"13d5":function(e,t,a){"use strict";var c=a("23e7"),o=a("d58f").left,l=a("a640"),n=a("2d00"),r=a("605d"),s=!r&&n>79&&n<83,i=s||!l("reduce");c({target:"Array",proto:!0,forced:i},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},1445:function(e,t,a){"use strict";a("f799")},"29ff":function(e,t,a){},"2f7b":function(e,t,a){"use strict";a("8b9c")},"363d":function(e,t,a){"use strict";a.r(t);a("14d9");var c=a("7a23"),o=a("6605"),l=a("126b"),n=a("8446"),r=a("0c89"),s=a("58c9"),i=a("b377");const d={class:"tab-content"},b={class:"panel"},u={class:"lt"};var p=Object(c["defineComponent"])({__name:"Proposals",setup(e){const t=Object(o["e"])(),a=Object(c["reactive"])({curTab:0,proposals:[],loading:{fetchProposals:!1}}),p=Object(c["computed"])(()=>{let e=[];const t=a.curTab;return 0==t?e=a.proposals:1==t?e=a.proposals.filter(e=>1*e.status===0||1*e.status===1):2==t?e=a.proposals.filter(e=>0==e.tag):3==t?e=a.proposals.filter(e=>1*e.status==3||1*e.status==4):4==t&&(e=a.proposals.filter(e=>1*e.status==2)),e}),j=Object(c["reactive"])({all:0,active:0,community:0,pools:0,failed:0});async function O(e=!1){try{a.loading.fetchProposals=e;const t=await Object(r["c"])(),c=_.orderBy(t,["blockNumber"],["desc"]),o=c.length||0,l=[];let d=[];const b=100;if(o>b){const e=Math.ceil(o/b);for(let o=0;o<e;o++){const e=c.concat();l.push(e.splice(o*b,b))}const t=l.map(e=>n["f"](e)),a=await Promise.all(t);a.forEach(e=>{d.push(...e)})}else d=await n["f"](c);m(d),d.forEach(async e=>{if(0===e.status){const t=await Object(i["b"])(e.startBlock,"MMM DD, YYYY HH:mm");e.lastTime=t}});const[u,p]=await Promise.all([Object(s["g"])(d),Object(s["c"])(d)]);d.forEach((e,t)=>{const a=e.id;u[a]&&(d[t].tokenName=u[a])}),d.forEach((e,t)=>{const a=e.id;p[a]&&(d[t].lastTime=p[a])}),a.proposals=d}catch(t){}finally{a.loading.fetchProposals=!1}}function m(e=[]){j.active=0,j.failed=0,j.pools=0,j.community=0,e.forEach(({status:e,tag:t})=>{0==e||1==e?j.active+=1:2==e&&(j.failed+=1),4==e||3==e?j.pools+=1:0==t&&(j.community+=1)}),j.all=e.length}function f(e){const t=String(e).toLowerCase(),a=j[t];return a>0?`${e}(${a})`:e}O(!0);const h=(e,a)=>{t.options.routes.map(t=>{t.name===e&&(t.meta.keepAlive=a)})};return Object(o["c"])((e,t)=>{"ProposalDetail"!==e.name?h(t.name,!1):h(t.name,!0)}),(e,t)=>{const o=Object(c["resolveComponent"])("TabItem"),n=Object(c["resolveComponent"])("Tabs"),r=Object(c["resolveComponent"])("shorterSkeletonItem"),s=Object(c["resolveComponent"])("shorterSkeleton"),i=Object(c["resolveComponent"])("Layout");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{title:"Proposals",back:{name:"Governance",text:"Governance"}},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:a.curTab,"onUpdate:modelValue":t[0]||(t[0]=e=>a.curTab=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{title:f("All")},null,8,["title"]),Object(c["createVNode"])(o,{title:f("Active")},null,8,["title"]),Object(c["createVNode"])(o,{title:f("Community")},null,8,["title"]),Object(c["createVNode"])(o,{title:f("Pools")},null,8,["title"]),Object(c["createVNode"])(o,{title:f("Failed")},null,8,["title"])]),_:1},8,["modelValue"]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",b,[a.loading.fetchProposals?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,animated:""},{template:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(3,e=>Object(c["createElementVNode"])("div",{key:e,class:"skeleton-container"},[Object(c["createElementVNode"])("div",u,[Object(c["createVNode"])(r,{style:{height:"20px"}}),Object(c["createElementVNode"])("footer",null,[Object(c["createVNode"])(r,{style:{height:"20px",width:"50px"}}),Object(c["createVNode"])(r,{style:{height:"20px",width:"50%","margin-left":"12px"}})])]),Object(c["createVNode"])(r,{style:{width:"58px",height:"24px"}})])),64))]),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(l["a"],{key:1,"proposal-list":Object(c["unref"])(p)},null,8,["proposal-list"]))])])]),_:1})}}}),j=(a("cc65"),a("6b0d")),O=a.n(j);const m=O()(p,[["__scopeId","data-v-0d289aee"]]);t["default"]=m},"45b9":function(e,t,a){},"4fd2":function(e,t,a){"use strict";a("8b2e")},"52fe":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),o=a("6605"),l=a("da92"),n=a("05ac"),r=a("b5fc"),s=a("8446"),i=a("619a"),d=a("9566"),b=a("bc10"),u=a("aeba"),p=a("6bbd");const j=e=>(Object(c["pushScopeId"])("data-v-035abc15"),e=e(),Object(c["popScopeId"])(),e),O={class:"dialog-committee-vault"},m=j(()=>Object(c["createElementVNode"])("div",{class:"title strong"},"Committee Vault",-1)),f={class:"main-content"},h={class:"form-group group-inline"},v={class:"lt"},g=j(()=>Object(c["createElementVNode"])("label",{for:""},"IPIJWL in Committee",-1)),V={class:"rt"},y=j(()=>Object(c["createElementVNode"])("label",{for:""},"Your Vote Weight",-1)),N={key:0,class:"weight-up"},k={class:"form-group"},E=j(()=>Object(c["createElementVNode"])("label",{for:""},"Deposit",-1)),w={class:"form-control"},x=["readonly"],B={class:"addition"},C=j(()=>Object(c["createElementVNode"])("small",null,"Wallet Balance",-1)),S={key:0,class:"notice"},D=j(()=>Object(c["createElementVNode"])("span",{class:"color-primary"},"0.1%",-1)),A={class:"form-group group-inline"},T={class:"lt"},I=j(()=>Object(c["createElementVNode"])("label",{for:""},"IPIJWL in Committee",-1)),P={class:"rt"},R=j(()=>Object(c["createElementVNode"])("label",{for:""},"Your Vote Weight",-1)),L={key:0,class:"weight-down"},M={class:"form-group"},F=j(()=>Object(c["createElementVNode"])("label",{for:""},"Withdraw",-1)),Y={class:"form-control"},W=["readonly"],U={class:"addition"},H=j(()=>Object(c["createElementVNode"])("small",null,"Current Providing",-1)),z={key:0,class:"notice"},q=j(()=>Object(c["createElementVNode"])("span",{class:"color-primary"},"0.1%",-1));var $=Object(c["defineComponent"])({__name:"BeRuler",props:{committeeBalance:{type:Number||String,default:()=>0},totalShare:{type:Number||String,default:()=>0},availableShare:{type:Number,default:()=>0},voteWeight:{type:Number,default:()=>0}},emits:["updateData","closeDialog"],setup(e,{emit:t}){const a=e,o=Object(c["reactive"])({curTab:0,showRulerTip:!0,ipistrAllowance:null}),j=Object(c["reactive"])({depositVal:null,withdrawVal:null,showApprove:!1}),_=Object(c["reactive"])({withdraw:!1,deposit:!1,approve:!1,fetchAllowance:!1}),$=Object(c["computed"])(()=>l["a"].minus(a.totalShare,a.availableShare)),Z=Object(c["computed"])(()=>{if(1*j.depositVal>1*p["a"].amount)return"Insufficient IPIJWL";if(u["a"].isRuler)return"Deposit IPIJWL";const e=l["a"].divide(l["a"].plus(j.depositVal||0,a.availableShare||0),l["a"].plus(j.depositVal||0,a.committeeBalance||0));return e>=.001&&1*a.voteWeight<.001?"Deposit IPIJWL to Become a Ruler!":"Deposit IPIJWL"}),G=Object(c["computed"])(()=>null!=j.depositVal&&(1*j.depositVal===0||1*j.depositVal>1*p["a"].amount)),Q=Object(c["computed"])(()=>null!=j.withdrawVal&&(1*j.withdrawVal>1*a.availableShare||j.withdrawVal<=0)),K=Object(c["computed"])(()=>{const e=l["a"].plus(j.depositVal||0,a.totalShare||0),t=l["a"].plus(a.committeeBalance||0,j.depositVal||0),c=l["a"].divide(e||0,t||0);return o.showRulerTip=1*c<.001,l["a"].minus(c||0,a.voteWeight||0)}),J=Object(c["computed"])(()=>{let e=0;if(1*j.withdrawVal){const t=1*j.withdrawVal;e=1*l["a"].divide(t||0,a.committeeBalance)}const t=l["a"].minus(a.voteWeight||0,e||0);return o.showRulerTip=t<.001,e>1?1:e});async function X(){try{_.fetchAllowance=!0;const e=Object(n["a"])();o.ipistrAllowance=await r["a"](u["a"].value,e.ShorterBone)}finally{_.fetchAllowance=!1}}async function ee(){try{_.approve=!0;const e=Object(n["a"])();await r["b"](e.ShorterBone,u["a"].value),await X(),te()}catch(e){Object(d["a"])(e)}finally{_.approve=!1}}function te(){j.showApprove=l["a"].minus(o.ipistrAllowance,j.depositVal)<0}async function ae(){if(Number(j.withdrawVal))if(Number(j.withdrawVal)>Number(a.availableShare))b["a"].warning("Too large withdrawal amount. Try a smaller value.");else try{_.withdraw=!0;const e=Object(i["b"])(j.withdrawVal,p["a"].decimals);await s["m"](e,u["a"].value),t("updateData"),t("closeDialog")}catch(e){Object(d["a"])(e.error)}finally{_.withdraw=!1}else b["a"].warning("Please enter a valid value")}async function ce(){if(Number(j.depositVal))try{_.deposit=!0;const e=j.depositVal;await s["b"](""+e,u["a"].value),t("updateData"),t("closeDialog")}catch(e){Object(d["a"])(e.error)}finally{_.deposit=!1}else b["a"].warning("Please enter a valid value")}function oe(){1*o.curTab===0?j.depositVal=p["a"].amount:j.withdrawVal=a.availableShare}return Object(c["watchEffect"])(()=>{u["a"].value&&u["k"].isConnected&&X()}),Object(c["watch"])(()=>j.depositVal,()=>{te()}),(t,a)=>{const l=Object(c["resolveComponent"])("TabItem"),n=Object(c["resolveComponent"])("Tabs"),r=Object(c["resolveComponent"])("shorterButton"),s=Object(c["resolveDirective"])("number-only");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,[m,Object(c["createElementVNode"])("div",f,[Object(c["createVNode"])(n,{modelValue:o.curTab,"onUpdate:modelValue":a[0]||(a[0]=e=>o.curTab=e),type:"3"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{title:"Deposit"}),Object(c["createVNode"])(l,{title:"Withdraw"})]),_:1},8,["modelValue"]),Object(c["withDirectives"])(Object(c["createElementVNode"])("form",{class:"form",onSubmit:a[3]||(a[3]=Object(c["withModifiers"])(()=>{},["prevent"]))},[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",v,[g,Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(e.committeeBalance)),1)]),Object(c["createElementVNode"])("div",V,[y,Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.voteWeight?Object(c["unref"])(i["k"])(100*Number(e.voteWeight)):0)+"%",1),j.depositVal>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",N," +"+Object(c["toDisplayString"])(Object(c["unref"])(K)?Object(c["unref"])(i["k"])(100*Object(c["unref"])(K)):0)+"% ",1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",k,[E,Object(c["createElementVNode"])("div",w,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>j.depositVal=e),readonly:_.deposit||_.fetchAllowance,type:"text",placeholder:"0"},null,8,x),[[c["vModelText"],j.depositVal],[s]]),Object(c["createElementVNode"])("span",{class:"max suffix",onClick:oe},"MAX")]),Object(c["createElementVNode"])("p",B,[C,Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(i["l"])(Object(c["unref"])(p["a"]).amount,Object(c["unref"])(p["a"]).price))+" IPIJWL",1)])]),!Object(c["unref"])(u["a"]).isRuler&&o.showRulerTip?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",S,[Object(c["createTextVNode"])(" Minimum vote weight for Ruler eligibility: "),D])):Object(c["createCommentVNode"])("",!0),Object(c["unref"])(u["k"]).isConnected?j.showApprove?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:2,type:"primary",loading:_.approve,class:"full big",onClick:ee},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Approve IPIJWL ")]),_:1},8,["loading"])):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:3,type:"primary",loading:_.deposit||_.fetchAllowance,disabled:Object(c["unref"])(G),class:"full big",onClick:ce},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(Z)),1)]),_:1},8,["loading","disabled"])):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,type:"primary",class:"full big",plain:"",onClick:a[2]||(a[2]=e=>Object(c["unref"])(u["k"]).visible=!0)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Unlock wallet ")]),_:1}))],544),[[c["vShow"],0==o.curTab]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("form",{class:"form",onSubmit:a[6]||(a[6]=Object(c["withModifiers"])(()=>{},["prevent"]))},[Object(c["createElementVNode"])("div",A,[Object(c["createElementVNode"])("div",T,[I,Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(e.committeeBalance)),1)]),Object(c["createElementVNode"])("div",P,[R,Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(i["k"])(100*e.voteWeight)||0)+"%",1),j.withdrawVal>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",L," -"+Object(c["toDisplayString"])(Object(c["unref"])(i["k"])(100*Math.min(e.voteWeight,Object(c["unref"])(J))))+"% ",1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",M,[F,Object(c["createElementVNode"])("div",Y,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>j.withdrawVal=e),readonly:_.withdraw||_.fetchAllowance,placeholder:"0",type:"text"},null,8,W),[[c["vModelText"],j.withdrawVal],[s]]),Object(c["createElementVNode"])("span",{class:"max suffix",onClick:oe},"MAX")]),Object(c["createElementVNode"])("p",U,[H,Object(c["createElementVNode"])("span",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(e.totalShare,2,!0))+" ",1),Object(c["unref"])($)>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])("("+Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(Object(c["unref"])($),2,!0))+" Locked)",1)],64)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" IPIJWL ")])])]),!Object(c["unref"])(u["a"]).isRuler&&o.showRulerTip?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",z,[Object(c["createTextVNode"])(" Minimum vote weight for Ruler eligibility: "),q])):Object(c["createCommentVNode"])("",!0),Object(c["unref"])(u["k"]).isConnected?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:2,type:"primary",disabled:Object(c["unref"])(Q),loading:_.withdraw||_.fetchAllowance,class:"full big",onClick:ae},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Withdraw IPIJWL ")]),_:1},8,["disabled","loading"])):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,type:"primary",class:"full big",plain:"",onClick:a[5]||(a[5]=e=>Object(c["unref"])(u["k"]).visible=!0)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Unlock wallet ")]),_:1}))],544),[[c["vShow"],1==o.curTab]])])])}}}),Z=(a("f565"),a("6b0d")),G=a.n(Z);const Q=G()($,[["__scopeId","data-v-035abc15"]]);var K=Q,J=a("0c89");const X=e=>(Object(c["pushScopeId"])("data-v-08d18abe"),e=e(),Object(c["popScopeId"])(),e),ee={class:"panel-container"},te=X(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Committee")],-1)),ae={class:"panel"},ce={class:"list-item"},oe=X(()=>Object(c["createElementVNode"])("div",{class:"item-con"},[Object(c["createElementVNode"])("span",null,"Rulers")],-1)),le={key:1,class:"text-content"},ne=X(()=>Object(c["createElementVNode"])("div",{class:"item-con align-right"},[Object(c["createElementVNode"])("span",null,"Your Share")],-1)),re={key:1,class:"text-content empty"},se={key:2,class:"text-content"},ie={class:"list-item"},de=X(()=>Object(c["createElementVNode"])("div",{class:"item-con"},[Object(c["createElementVNode"])("span",null,"Total Locked")],-1)),be={key:1,class:"text-content"},ue={key:0},pe={key:1},je=X(()=>Object(c["createElementVNode"])("div",{class:"cm-bg-con"},null,-1));var Oe=Object(c["defineComponent"])({__name:"CommitteeStatus",setup(e){const t=Object(c["inject"])("events"),a=Object(c["ref"])(null),o=Object(c["reactive"])({loading:{fetchBalance:!0,fetchRulers:!1,fetchShares:!1},committeeBalance:0,totalShare:0,availableShare:0,voteWeight:0}),d=Object(c["reactive"])({joinCommittee:!1});function b(){j(!0),O(),u["a"].value&&m(u["a"].value)}function p(){Object(u["g"])(u["a"].value),"function"===typeof t.getTopRulers&&t.getTopRulers(),b()}async function j(e=!1){const t=Object(n["a"])();try{o.loading.fetchBalance=e;const{amount:a}=await r["c"](t.Committee);o.committeeBalance=a}catch(a){}finally{o.loading.fetchBalance=!1}}async function O(){try{o.loading.fetchRulers=!0,a.value=await Object(J["d"])(),o.loading.fetchRulers=!1}catch(e){}}async function m(e){try{var t,a;o.loading.fetchShares=!0;const[c,n]=await Promise.all([s["i"](e),s["h"]()]);o.totalShare=null!==(t=null===c||void 0===c?void 0:c.totalShare)&&void 0!==t?t:0,o.availableShare=null!==(a=null===c||void 0===c?void 0:c.availableShare)&&void 0!==a?a:0,o.voteWeight=l["a"].divide(o.totalShare,n)}catch(c){}finally{o.loading.fetchShares=!1}}return b(),Object(c["watch"])(()=>u["b"].id,()=>{b()}),Object(c["watch"])(()=>u["a"].value,e=>m(e)),(e,t)=>{const l=Object(c["resolveComponent"])("shorterSkeletonItem"),n=Object(c["resolveComponent"])("shorterSkeleton"),r=Object(c["resolveComponent"])("Tag"),s=Object(c["resolveComponent"])("shorterButton"),b=Object(c["resolveComponent"])("Dialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ee,[te,Object(c["createElementVNode"])("div",ae,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",ce,[Object(c["createElementVNode"])("div",null,[oe,o.loading.fetchRulers?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,style:{padding:"5px 0",width:"120px"},animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"60px",height:"26px"}})]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("h3",le,Object(c["toDisplayString"])(a.value),1))]),Object(c["createElementVNode"])("div",null,[ne,o.loading.fetchShares?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,style:{padding:"5px 0",width:"60px"},animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"60px",height:"26px"}})]),_:1})):Object(c["unref"])(u["k"]).isConnected?(Object(c["openBlock"])(),Object(c["createElementBlock"])("h3",se,Object(c["toDisplayString"])(o.voteWeight?Object(c["unref"])(i["k"])(100*o.voteWeight):0)+"%",1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("h3",re,"--"))])]),Object(c["createElementVNode"])("li",ie,[Object(c["createElementVNode"])("div",null,[de,o.loading.fetchBalance?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,style:{padding:"5px 0",width:"120px"},animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"26px"}})]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("h3",be,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(o.committeeBalance,2,!0))+" ",1),Object(c["createVNode"])(r,{class:"tag"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("IPIJWL")]),_:1})]))]),Object(c["unref"])(u["k"]).isConnected?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,class:"committee-ruler-btn large",type:"primary",plain:"",onClick:t[0]||(t[0]=e=>d.joinCommittee=!0)},{default:Object(c["withCtx"])(()=>[Object(c["unref"])(u["a"]).isRuler?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",ue,"Get involved")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",pe,"Join now"))]),_:1})):Object(c["createCommentVNode"])("",!0)])]),je]),Object(c["createVNode"])(b,{modelValue:d.joinCommittee,"onUpdate:modelValue":t[2]||(t[2]=e=>d.joinCommittee=e),width:"560px"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(K,{"committee-balance":o.committeeBalance,"total-share":o.totalShare,"available-share":o.availableShare,"vote-weight":o.voteWeight,onUpdateData:p,onCloseDialog:t[1]||(t[1]=e=>d.joinCommittee=!1)},null,8,["committee-balance","total-share","available-share","vote-weight"])]),_:1},8,["modelValue"])])}}});a("ee46");const me=G()(Oe,[["__scopeId","data-v-08d18abe"]]);var fe=me;const he=e=>(Object(c["pushScopeId"])("data-v-b12615fe"),e=e(),Object(c["popScopeId"])(),e),ve={class:"panel-container"},ge=he(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Proposals Stats")],-1)),Ve={class:"panel"},ye={class:"proposal-list"},Ne={class:"proposal-info"},ke={class:"status"},Ee={class:"num"},we={key:1};var xe=Object(c["defineComponent"])({__name:"ProposalsCounter",props:{data:{type:Array,default:()=>[]}},setup(e){const t=Object(c["inject"])("loading"),a=Object(c["inject"])("proposalsCounter"),o=Object(c["reactive"])({counter:[{status:"Active",color:"#d08fff",count:0,percentage:0},{status:"Passed",color:"#02d396",count:0,percentage:0},{status:"Failed",color:"#FD7676",count:0,percentage:0}]});function l(e,t){return e=e.toLowerCase(),t[e]}function n(e,t){return e=e.toLowerCase(),100*t[e]/t["total"]||0}return(e,r)=>{const s=Object(c["resolveComponent"])("shorterSkeletonItem"),i=Object(c["resolveComponent"])("shorterSkeleton"),d=Object(c["resolveComponent"])("shorterProgress");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ve,[ge,Object(c["createElementVNode"])("div",Ve,[Object(c["createElementVNode"])("ul",ye,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.counter,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.status,class:"proposal-item"},[Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("span",ke,Object(c["toDisplayString"])(e.status),1),Object(c["createElementVNode"])("div",Ee,[Object(c["unref"])(t).getProposalsCounter?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,style:{padding:"1px 0",width:"60px"},animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(s,{style:{height:"17px"}})]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",we,Object(c["toDisplayString"])(l(e.status,Object(c["unref"])(a))),1))])]),Object(c["createVNode"])(d,{color:e.color,"stroke-width":8,percentage:n(e.status,Object(c["unref"])(a))},null,8,["color","percentage"])]))),128))])])])}}});a("699a");const Be=G()(xe,[["__scopeId","data-v-b12615fe"]]);var Ce=Be,Se=a("126b"),De=a("58c9"),Ae=a("b377");const Te=e=>(Object(c["pushScopeId"])("data-v-39bc770f"),e=e(),Object(c["popScopeId"])(),e),Ie={class:"panel-container"},Pe=Te(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Latest Proposals")],-1)),_e={class:"panel"},Re={class:"lt"},Le={key:0,class:"footer"};var Me=Object(c["defineComponent"])({__name:"RecentProposals",setup(e){const t=Object(c["inject"])("loading"),a=Object(c["inject"])("proposalsCounter"),l=Object(o["d"])(),n=Object(c["reactive"])({proposals:[],loading:{fetchProposals:!1},proposalsCount:0});async function r(e=!1){try{n.loading.fetchProposals=e,t["getProposalsCounter"]=e;const a=await i()||[];b(a),await d(a.slice(0,5)),n.proposalsCount=a.length}catch(a){}finally{n.loading.fetchProposals=!1}}async function i(){try{const e=await Object(J["c"])(),t=_.orderBy(e,["blockNumber"],["desc"]);return t}catch(e){}}async function d(e){try{if(!e.length)return n.proposals=[],!1;const t=await s["f"](e);t.forEach(async e=>{if(0===e.status){const t=await Object(Ae["b"])(e.startBlock,"MMM DD, YYYY HH:mm");e.lastTime=t}});const[a,c]=await Promise.all([Object(De["g"])(t),Object(De["c"])(t)]);return t.forEach((e,o)=>{const l=e.id;a[l]&&(t[o].tokenName=a[l]),c[l]&&(t[o].lastTime=c[l])}),n.proposals=t,!0}catch(t){}}async function b(e){try{if(!e.length)return void p();t["getProposalsCounter"]=!0;const c=await s["g"](e)||[];p(),c.forEach(({status:e})=>{a.total+=1,0==e?a.active+=1:2==e?a.failed+=1:1==e||3==e||4==e?a.passed+=1:a.error+=1})}finally{t["getProposalsCounter"]=!1}}function p(){a.active=0,a.passed=0,a.failed=0,a.error=0,a.total=0}return Object(c["watch"])(()=>u["b"].id,()=>{n.proposals=[],p(),r(!0)}),r(!0),(e,t)=>{const a=Object(c["resolveComponent"])("shorterSkeletonItem"),o=Object(c["resolveComponent"])("shorterSkeleton"),r=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ie,[Pe,Object(c["createElementVNode"])("div",_e,[n.loading.fetchProposals?(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0,animated:""},{template:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(3,e=>Object(c["createElementVNode"])("div",{key:e,class:"skeleton-container"},[Object(c["createElementVNode"])("div",Re,[Object(c["createVNode"])(a,{style:{height:"20px"}}),Object(c["createElementVNode"])("footer",null,[Object(c["createVNode"])(a,{style:{height:"20px",width:"50px"}}),Object(c["createVNode"])(a,{style:{height:"20px",width:"50%","margin-left":"12px"}})])]),Object(c["createVNode"])(a,{style:{width:"58px",height:"24px"}})])),64))]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createVNode"])(Se["a"],{"proposal-list":n.proposals},null,8,["proposal-list"]),n.proposalsCount>5?(Object(c["openBlock"])(),Object(c["createElementBlock"])("footer",Le,[Object(c["createVNode"])(r,{to:{name:"Proposals",query:Object(c["unref"])(l).query},class:"link"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("View all proposals")]),_:1},8,["to"])])):Object(c["createCommentVNode"])("",!0)],64))])])}}});a("9219");const Fe=G()(Me,[["__scopeId","data-v-39bc770f"]]);var Ye=Fe,We=(a("14d9"),a("a284")),Ue=a("3d2e"),He=a("805f"),ze=a("f0af");const qe=e=>(Object(c["pushScopeId"])("data-v-c20e3984"),e=e(),Object(c["popScopeId"])(),e),$e={class:"panel-container"},Ze=qe(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Ruler Leaderboard")],-1)),Ge={class:"panel"},Qe={key:0,class:"shorter-table table"},Ke=qe(()=>Object(c["createElementVNode"])("thead",{class:"table-header"},[Object(c["createElementVNode"])("th",null,"Rank"),Object(c["createElementVNode"])("th",{class:"text-right"},"Votes (Weight)"),Object(c["createElementVNode"])("th",{class:"text-right"},"# Proposals Voted")],-1)),Je={class:"ruler"},Xe={class:"rank"},et=qe(()=>Object(c["createElementVNode"])("img",{class:"avatar",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAilBMVEUAAADAxczBxc3Bxc3Bxc3Bx87Dx87Bx83Bxc3Bxc3Bxc3Bxs7Cxc7EyNLe3t7BxczAxM3AxMzBxczAxc3BxM3Bxc3BxM3Bxc3Bxs3Dx8/MzMzGxtX////Cxc7AxMz////IzNPh4+f6+vvT1tvw8fPFydH19vf8/P3P0tj3+Pne4OTp6u3t7vDX2t9vjLPmAAAAHnRSTlMA7MX64Ek2KrqkmWNUHAf17+fSy7Ksi3trQBQSBFgWr+bPAAADyUlEQVRo3sTY13LbMBAF0EWRWU31avkipNU9+f/fSzKjCSYRSS9AwDqvesBgG5YiZ1VSrrNUzrRQSuiZTLN1mVQUV7JZarTSy01CceyKbIpe06zYUWBVuVBgUIsyZNRf8gnYJvkLhbFN4Sjd0nAjCQ9yNDTIc3iaDwn4W44B8jfyVAgMIgry8SoxmHz1KCqBAIRrke1XCGS1Hx7m+OFONALSCbt5BYISL8yyGiOwMavE3hWCU++M+ypEoEZf5neMKMZf5DkRiEQkvf2rEY3u6ee9RESye4atENWqs6Dh4FIfTufz6VBfwDbqSLAA260xfzU3MIn2NEtwfVzNP64f4JHUogBXbR7U4Cla9isBpk/T4hMs4nEPy53u633n/GFUsvNrOjDz/P/onIPpajpcwTL3bOGb6XTzaWYJpsZ0ajxaagumi+lxAcuWrNS9pP0LO/UoaRxMjwNcCzsH18n0OMGxl6sJuM6mxxk8k+p+cIkwBzdgKu8HL/C9ocbi/j+SwvcWF9TOvofh2on/Omawog4QK6M/prCijkxrSr8lsCI/ElZCRBtYkZ9Fa0NES1iRFwFrSUQaVuTVx9JEFazoy55VcWqLv97yJZxBzV/o+Upag4H7CcO35swt/kcbX0YpniIliaeQNMNTzEjjKTQJOPl56midH0e4EKTAd6wbY5pj609NU7scrX6xZi0rCMNAUHyLRRAE9WLTpElaW///98RTwZCZ7aZz7WFK9jWzO4e4AQrnp4niDOqN/KldSPpj8k/WiZ9amlx+QBPQzR4WW2E5mTDRpmH2dvoWOlk5yRpIZ4GQ/RO9UcS8FrVMF8EYTMZkdKKWeRLULhY6qRj6CIYEHYsZLW39FGCN/rpzIWAs9ittncKaF0FFpY8PyLDktF9greRAxd5YAz2bV7vjC+PC5K0DlsUnARYn2JYJet9jW9qC32KC/oHnAkLTaE3rg5g2U+sRDcotYlMHFSWfF1dizH0sIY4e9C28injrGLlhPpPlS19GHMjyZXXDNaxHh9dNqwrUEoeioiqyUmxLiVuwUkRL1LoY7CCyxyHWo2P3kONyIeYFdUSnAX3b4s3ryY4hYznxSO+Lu6WSmqf1jh68Qjlxnz14ocS25cQRpHS+ls23ezs4ARgGYiCIA3mFVJD++0wBfghsLUhWD/e6WcPmGxZvXGrjE49rao941VO7BE6gNl7BMajdaQAFJzd5yIhlVZmQjKNzuViQ4ZHZINRPYPPRr5c5d8BuG2VvwvuGXKEv0NhJUnojnJXsqD+0WknLDojpzPngDyPZMe9GfORAAAAAAElFTkSuQmCC",alt:""},null,-1)),tt={class:"hash"},at={class:"text-right"},ct={class:"text-right"};var ot=Object(c["defineComponent"])({__name:"TopRulers",setup(e){const t=Object(c["reactive"])({topRulers:[],loading:{fetchRulers:!1,listenLogs:!1}}),a=Object(c["inject"])("loading"),o=Object(c["inject"])("events");async function r(e=!1){try{t.loading.fetchRulers=e;const a=await d();t.topRulers=_.orderBy(a,["totalShare"],["desc"]).slice(0,10),b([...t.topRulers]),t.loading.fetchRulers=!1}catch(a){}}async function d(){const[e,t]=await Promise.all([Object(J["a"])()||[],s["h"]()]);if(!e.length)return[];const a=[],c=Object(n["a"])(),o=await Object(He["a"])(),r=[],i=new We["Contract"](c.Committee,Ue);e.map(e=>{r.push(i.getUserShares(e))});const d=await o.all(r)||[];return d.forEach((c,o)=>{const n=1*ze["b"](c.totalShare),r=l["a"].divide(n,t)||0,s=r>.001;s&&a.push({hash:e[o],voteWeight:r,totalShare:n,votedCount:"-"})}),a}function b(e){e.map(async(e,a)=>{try{const c=await Object(J["e"])(e.hash)||[],o=c.length;t.topRulers[a].votedCount=o,t.topRulers[a].loading=!0}catch(c){t.topRulers[a].votedCount=0}})}return Object(c["watch"])(()=>t.loading.fetchRulers,e=>{a["fetchRulers"]=e}),Object(c["watch"])(()=>u["b"].id,()=>{r(!0)}),o["getTopRulers"]=()=>{r(!0)},r(!0),(e,a)=>{const o=Object(c["resolveComponent"])("shorterSkeletonItem"),l=Object(c["resolveComponent"])("shorterSkeleton"),n=Object(c["resolveComponent"])("Empty");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",$e,[Ze,Object(c["createElementVNode"])("div",Ge,[Object(c["createVNode"])(l,{loading:t.loading.fetchRulers},{template:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(4,e=>Object(c["createVNode"])(o,{key:e,style:{height:"20px","margin-top":"32px"}})),64))]),default:Object(c["withCtx"])(()=>[t.topRulers&&t.topRulers.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("table",Qe,[Ke,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.topRulers,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:"rulers_"+t},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",Je,[Object(c["createElementVNode"])("span",Xe,Object(c["toDisplayString"])(t+1),1),et,Object(c["createElementVNode"])("span",tt,Object(c["toDisplayString"])(e.hash),1)])]),Object(c["createElementVNode"])("td",at,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(i["d"])(e.totalShare))+Object(c["toDisplayString"])(` (${Object(c["unref"])(i["k"])(100*e.voteWeight)}%)`),1)]),Object(c["createElementVNode"])("td",ct,[Object(c["createVNode"])(l,{animated:"",loading:!e.loading},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{style:{height:"18px",width:"30%"}})]),default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.votedCount),1)]),_:2},1032,["loading"])])]))),128))])])):(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:1,content:"No rulers yet"}))]),_:1},8,["loading"])])])}}});a("e65c");const lt=G()(ot,[["__scopeId","data-v-c20e3984"]]);var nt=lt;const rt={class:"panel-group"},st={class:"panel-list"};var it=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["computed"])(()=>!(!u["a"].value||u["a"].isRuler));Object(c["provide"])("loading",Object(c["reactive"])({})),Object(c["provide"])("events",Object(c["reactive"])({})),Object(c["provide"])("proposalsCounter",Object(c["reactive"])({active:0,passed:0,failed:0,error:0,total:0}));const a=Object(o["e"])(),l=(e,t)=>{a.options.routes.map(a=>{a.name===e&&(a.meta.keepAlive=t)})};return Object(o["c"])((e,t)=>{"Proposals"!==e.name&&"ProposalDetail"!==e.name?l(t.name,!1):l(t.name,!0)}),(e,a)=>{const o=Object(c["resolveComponent"])("Layout");return Object(c["openBlock"])(),Object(c["createBlock"])(o,{title:"Governance",subtitle:Object(c["unref"])(t)?"Rulers can earn IPIJWL by processing liquidations and voting proposals.":""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",rt,[Object(c["createElementVNode"])("div",st,[Object(c["createVNode"])(fe,{class:"panel-item"}),Object(c["createVNode"])(Ce,{class:"panel-item"})]),Object(c["createVNode"])(Ye),Object(c["createVNode"])(nt)])]),_:1},8,["subtitle"])}}});a("2f7b");const dt=G()(it,[["__scopeId","data-v-55c21720"]]);t["default"]=dt},"543f":function(e,t,a){},"58c9":function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"g",(function(){return b})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return j})),a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return m}));a("14d9");var c=a("70cb"),o=a("c39f"),l=a("0c89"),n=a("5eb3"),r=a("b377"),s=a("f0af"),i=a("60bb");async function d(e=[]){if(0!==e.length)try{const e=await Object(l["b"])(),t={};return await Promise.all(e.map(async e=>{const a=1*s["a"](e.proposalId),c=await Object(r["b"])(e.blockNumber,"MMM DD, YYYY HH:mm"),o=e.blockNumber;(!t[a]||t[a]&&t[a].blockNumber<o)&&(t[a]=c)})),t}catch(t){return Promise.reject(t)}}async function b(e=[]){const t={},a=[];return e.forEach(async({tokenContract:e})=>{const t=await Object(o["d"])(e);a.push(t)}),e.forEach(({id:e},c)=>{t[e]=a[c]}),Promise.resolve(t)}function u(e){const t=1*e,a=["Active","Passed","Failed","Queued","Executed"];return a[t]||""}function p(e){const t=1*e,a=["Active","Passed","Failed","Passed","Passed"];return a[t]||""}function j(e){const t=["Community","Pool"];if(e){const a=1*e;return t[a]}return"Pool"}function O(e,t){const a=`New $${e||"---"} loaning pool, leverage ${t}×`;return a}function m(e,t){if(!t||"-"===t)return"";const a=f(t);let c="";0==e?(e="Created",a&&(c=`<svg style="transform: translateY(2.4px); margin-left: 30px; margin-right: 4px;" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g id="page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Governance-s" transform="translate(-628.000000, -187.000000)">\n                <g id="group" transform="translate(628.000000, 187.000000)">\n                    <rect id="s" fill-opacity="0.01" fill="#FFFFFF" fill-rule="nonzero" x="0" y="0" width="16" height="16"></rect>\n                    <path d="M8,14.6666667 C11.1296,14.6666667 13.6666667,12.1296 13.6666667,9 C13.6666667,5.8704 11.1296,3.33333333 8,3.33333333 C4.8704,3.33333333 2.33333333,5.8704 2.33333333,9 C2.33333333,12.1296 4.8704,14.6666667 8,14.6666667 Z" id="path" stroke="#909399" stroke-width="1.5" stroke-linejoin="round"></path>\n                    <line x1="10.3333333" y1="1.33333333" x2="5.66666667" y2="1.33333333" id="path" stroke="#909399" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></line>\n                    <line x1="12.6666667" y1="3.33333333" x2="11.6666667" y2="4.33333333" id="path" stroke="#909399" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></line>\n                    <line x1="8" y1="6" x2="8" y2="9" id="path" stroke="#909399" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></line>\n                </g>\n            </g>\n        </g>\n    </svg>${a} left`)):e=u(e);const o=`${e} on ${Object(n["a"])(t)} (${i["a"].text}) ${c}`;return o}function f(e){let t="";const a=new Date(e).getTime()+1728e5,o=a-(new Date).getTime();if(o<0)return t;const l=c["a"].duration(o),n=l.days(),r=l.hours(),s=l.minutes(),i=l.seconds();function d(e,t){return e>1&&(t+="s"),`${e} ${t}`}return n>0?(t+=d(n,"day"),r>0&&(t+=", "+d(r,"hour"))):r>1?(t+=d(r,"hour"),s>0&&(t+=", "+d(s,"minute"))):s>1?(t+=d(s,"minute"),i>0&&(t+=", "+d(i,"second"))):t+=d(i,"second"),t}},"5eb3":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));var c=a("70cb"),o=a("60bb");function l(e,t="MMM DD, YYYY HH:mm"){if("Invalid Date"===e)return"";if(!Object(c["a"])(e).isValid())return"";const a=Object(c["a"])(e);let l=a.utcOffset(o["a"].value).format(t).trim();return l.endsWith(",")&&(l=l.replace(/,$/g,"")),l}function n(e){return Object(c["a"])(e).isValid()?Object(c["a"])(e).fromNow(!0):""}function r(e,t=0){const a=c["a"].duration(e),o=a.years(),l=a.months(),n=a.days(),r=a.hours(),s=a.minutes(),i={years:["y","year"],months:["m","month"],days:["d","day"],hours:["h","hour"],minutes:["m","minute"]},d=i["years"][t],b=i["months"][t],u=i["days"][t],p=i["hours"][t],j=i["minutes"][t];let O="";if(o>=1)return O=`${m(o,d)} ${m(l,b)}`,O;function m(e,a){return 0==e?"":(e>1&&0!=t&&(a+="s"),`${e} ${a}`)}return O=l>=1?`${m(l,b)} ${m(n,u)}`:n>=1?`${m(n,u)} ${m(r,p)}`:r>=1?`${m(r,p)} ${m(s,j)}`:s>=1?""+m(s,j):"<1 minute",O}},"605d":function(e,t,a){(function(t){var c=a("c6b6");e.exports="undefined"!=typeof t&&"process"==c(t)}).call(this,a("4362"))},"699a":function(e,t,a){"use strict";a("767c")},"767c":function(e,t,a){},"7dda":function(e,t,a){},"8b2e":function(e,t,a){},"8b9c":function(e,t,a){},"8bf3":function(e,t,a){"use strict";a("e15f")},9219:function(e,t,a){"use strict";a("29ff")},"9bb2":function(e,t,a){},"9c29":function(e,t,a){},a640:function(e,t,a){"use strict";var c=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&c((function(){a.call(null,t||function(){return 1},1)}))}},a662:function(e,t,a){},bc4a:function(e,t,a){"use strict";a("45b9")},c89c:function(e,t,a){"use strict";var c=a("7a23"),o=Object(c["defineComponent"])({__name:"ProposalStatus",props:{status:{type:String,default:()=>""}},setup(e){return(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["proposal-status",e.status])},[Object(c["createElementVNode"])("span",null,[Object(c["renderSlot"])(t.$slots,"default")])],2))}}),l=(a("0548"),a("6b0d")),n=a.n(l);const r=n()(o,[["__scopeId","data-v-29389eba"]]);t["a"]=r},cc65:function(e,t,a){"use strict";a("7dda")},d58f:function(e,t,a){var c=a("59ed"),o=a("7b0b"),l=a("44ad"),n=a("07fa"),r=TypeError,s=function(e){return function(t,a,s,i){c(a);var d=o(t),b=l(d),u=n(d),p=e?u-1:0,j=e?-1:1;if(s<2)while(1){if(p in b){i=b[p],p+=j;break}if(p+=j,e?p<0:u<=p)throw r("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=j)p in b&&(i=a(i,b[p],p,d));return i}};e.exports={left:s(!1),right:s(!0)}},d9ca:function(e,t,a){"use strict";a.r(t);a("14d9");var c=a("7a23"),o=a("6605"),l=a("da92"),n=a("8446"),r=a("619a"),s=a("bc10"),i=a("aeba"),d=a("6bbd"),b=a("9566"),u=a("f0af");const p=e=>(Object(c["pushScopeId"])("data-v-03ce28ba"),e=e(),Object(c["popScopeId"])(),e),j={key:0,class:"votes-result"},O={class:"panel-container"},m={class:"panel"},f={class:"progress-container"},h={class:"status"},v=p(()=>Object(c["createElementVNode"])("span",null,"For",-1)),g={class:"vote-list"},V=p(()=>Object(c["createElementVNode"])("span",null,"Votes",-1)),y={class:"panel-container"},N={class:"panel"},k={class:"progress-container"},E={class:"status"},w=p(()=>Object(c["createElementVNode"])("span",null,"Against",-1)),x={class:"vote-list"},B=p(()=>Object(c["createElementVNode"])("span",null,"Votes",-1)),C={key:1,class:"votes-result"},S={class:"panel"},D={class:"skeleton-container"},A={style:{display:"flex","justify-content":"space-between"}},T=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),I=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),P={style:{display:"flex","justify-content":"space-between","margin-bottom":"20px"}},R={style:{display:"flex","justify-content":"space-between","margin-top":"24px"}},L={class:"dialog-vote-list votes-result"},M={class:"title"},F={class:"progress-container"},Y={class:"status"},W={class:"vote-list"},U={key:0},H={key:1},z=p(()=>Object(c["createElementVNode"])("span",null,"Votes",-1)),q={class:"dialog-vote"},$=p(()=>Object(c["createElementVNode"])("h4",{class:"title"},"Vote on this Proposal",-1)),Z={class:"form-group"},G=p(()=>Object(c["createElementVNode"])("label",null,"Amount",-1)),Q={class:"form-control"},K={class:"addition"},J=p(()=>Object(c["createElementVNode"])("small",null,"Available",-1));var X=Object(c["defineComponent"])({__name:"VotesResult",props:{loading:{type:Boolean,default:()=>!0},totalAmount:{type:[String,Number],default:()=>""},availableVoteAmount:{type:[String,Number],default:()=>""},proposalDetail:{type:Object,default:()=>{}},forList:{type:Array,default:()=>[]},againstList:{type:Array,default:()=>[]}},emits:["refreshData"],setup(e,{emit:t}){const a=e,p=Object(o["d"])(),_=Object(c["reactive"])({forAmount:0,againstAmount:0,list:[],title:"For",total:0,percent:0,form:{voteBtnAllow:!1,amount:"",type:0,btnStatus:{voteWaiting:!1,vote:!1}},loading:{vote:!1}}),X=Object(c["reactive"])({voteList:!1,vote:!1}),ee=Object(c["computed"])(()=>l["a"].minus(a.totalAmount,a.availableVoteAmount));function te(e){const t=a.proposalDetail;1===e&&(_.title="For",_.list=a.forList,_.percent=t.forPercent,_.total=t.total_for_votes),0===e&&(_.title="Against",_.list=a.againstList,_.percent=t.againstPercent,_.total=t.total_against_votes),X.voteList=!0}function ae(e){i["a"].isRuler?(X.vote=!0,_.form.type=e,_.form.amount=""):s["a"].error("Voting is exclusive to Rulers.")}function ce(e){return e?Number(e).toFixed(2):0}async function oe(e){if(!(e.amount>0))return s["a"].warning("Please enter a valid value"),!1;if(Number(e.amount)>Number(a.availableVoteAmount))return void s["a"].warning("Too large amount. Try a smaller value.");if(0===Number(a.availableVoteAmount))return e.voteBtnAllow=!0,void s["a"].warning("Failed to vote");if(1*a.proposalDetail.status!==0)return e.voteBtnAllow=!0,void s["a"].warning(`Proposal #${a.proposalDetail.id} is finished`);const c={proposalId:p.params.id,type:e.type,from:i["a"].value,voteShare:Object(r["b"])(e.amount,d["a"].decimals)};try{_.loading.vote=!0,await n["l"](c),_.form.amount="",setTimeout(()=>{X.vote=!1},1e3),t("refreshData"),s["a"].success("Voted successfully")}catch(o){-1!==o.message.indexOf("Not an active proposal")?(s["a"].error("This is not an active proposal"),X.vote=!1,setTimeout(()=>{window.location.reload()},1e3)):Object(b["a"])(o)}finally{_.loading.vote=!1}}function le(e,t,a){const c=e.concat(),o={},l={};c.forEach(e=>{const{account:t,share_big:a,blockNumber:c}=e;l[t]=l[t]&&l[t]>c?l[t]:c,o[t]?o[t]=o[t].add(a):o[t]=a});const n=[];if(Object.keys(o).forEach(e=>{n.push({account:e,blockNumber:l[e],share:u["b"](o[e])})}),a){const e=Object.keys(o).length;"for"==a?_.forAmount=e:"against"==a&&(_.againstAmount=e)}if(t){while(n.length<t)n.push({});return n.sort((e,t)=>t.blockNumber-e.blockNumber).slice(0,3)}return n.sort((e,t)=>t.blockNumber-e.blockNumber)}return(t,a)=>{const o=Object(c["resolveComponent"])("SmartNumber"),l=Object(c["resolveComponent"])("shorterProgress"),n=Object(c["resolveComponent"])("ShorterProgress"),s=Object(c["resolveComponent"])("shorterSkeletonItem"),b=Object(c["resolveComponent"])("shorterSkeleton"),u=Object(c["resolveComponent"])("Dialog"),p=Object(c["resolveComponent"])("shorterButton"),ne=Object(c["resolveDirective"])("number-only");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[e.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",C,[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(2,e=>Object(c["createElementVNode"])("div",{key:e,class:"panel-container"},[Object(c["createElementVNode"])("div",S,[Object(c["createVNode"])(b,{animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("div",A,[Object(c["createVNode"])(s,{style:{height:"28px",width:"24%"}}),Object(c["createVNode"])(s,{style:{height:"28px",width:"24%"}})]),T,Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(s,{style:{height:"20px",width:"100%"}})]),I,Object(c["createElementVNode"])("div",P,[Object(c["createVNode"])(s,{style:{height:"20px",width:"12%"}}),Object(c["createVNode"])(s,{style:{height:"20px",width:"12%"}})]),Object(c["createElementVNode"])("ul",null,[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(3,e=>Object(c["createElementVNode"])("li",{key:e,style:{display:"flex","justify-content":"space-between",padding:"14px 0"}},[Object(c["createVNode"])(s,{style:{height:"20px",width:"32%"}}),Object(c["createVNode"])(s,{style:{height:"20px",width:"32%"}})])),64))]),Object(c["createElementVNode"])("div",R,[Object(c["createVNode"])(s,{style:{height:"40px",width:"26%"}}),Object(c["createVNode"])(s,{style:{height:"40px",width:"26%"}})])])]),_:1})])])),64))])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",h,[v,Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(o,{type:"quantity",value:e.proposalDetail.total_for_votes},null,8,["value"])])]),Object(c["createVNode"])(l,{color:"#02D396","stroke-width":8,percentage:e.proposalDetail.forPercent},null,8,["percentage"])]),Object(c["createElementVNode"])("ul",g,[Object(c["createElementVNode"])("header",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(_.forAmount)+" "+Object(c["toDisplayString"])(_.forAmount>1?"Addresses":"Address")+" ",1),V]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(le(e.forList,3,"for"),(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.account?Object(c["unref"])(r["c"])(e.account):""),1),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(o,{type:"quantity",value:e.share||""},null,8,["value"])])]))),128)),Object(c["createElementVNode"])("footer",null,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])({disable:_.forAmount<=3}),onClick:a[0]||(a[0]=e=>te(1))},"View all",2)]),Object(c["createElementVNode"])("div",null,[Object(c["unref"])(i["k"]).isConnected?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,class:Object(c["normalizeClass"])({disable:e.proposalDetail.status>1}),onClick:a[1]||(a[1]=e=>ae(1))}," Vote ",2)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:1,onClick:a[2]||(a[2]=e=>Object(c["unref"])(i["k"]).visible=!0)},"Unlock wallet"))])])])])]),Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",E,[w,Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(o,{type:"quantity",value:e.proposalDetail.total_against_votes},null,8,["value"])])]),Object(c["createVNode"])(n,{color:"#EF5A4F","stroke-width":8,percentage:e.proposalDetail.againstPercent},null,8,["percentage"])]),Object(c["createElementVNode"])("ul",x,[Object(c["createElementVNode"])("header",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(_.againstAmount)+" "+Object(c["toDisplayString"])(_.againstAmount>1?"Addresses":"Address")+" ",1),B]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(le(e.againstList,3,"against"),(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.account?Object(c["unref"])(r["c"])(e.account):""),1),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(o,{type:"quantity",value:e.share||""},null,8,["value"])])]))),128))]),Object(c["createElementVNode"])("footer",null,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])({disable:_.againstAmount<=3}),onClick:a[3]||(a[3]=e=>te(0))},"View all",2)]),Object(c["createElementVNode"])("div",null,[Object(c["unref"])(i["k"]).isConnected?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,class:Object(c["normalizeClass"])({disable:e.proposalDetail.status>1}),onClick:a[4]||(a[4]=e=>ae(0))}," Vote ",2)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:1,onClick:a[5]||(a[5]=e=>Object(c["unref"])(i["k"]).visible=!0)},"Unlock wallet"))])])])])])),Object(c["createVNode"])(u,{modelValue:X.voteList,"onUpdate:modelValue":a[6]||(a[6]=e=>X.voteList=e),width:"560px"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("h4",M,Object(c["toDisplayString"])(_.title)+" Votes--"+Object(c["toDisplayString"])(ce(_.percent))+"%",1),Object(c["createElementVNode"])("div",F,[Object(c["createElementVNode"])("div",Y,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(_.title),1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(r["d"])(_.total)),1)]),Object(c["createVNode"])(n,{color:"For"===_.title?"#02D396":"#EF5A4F","stroke-width":8,percentage:_.percent},null,8,["color","percentage"])]),Object(c["createElementVNode"])("ul",W,[Object(c["createElementVNode"])("header",null,[Object(c["createElementVNode"])("span",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])("For"==_.title?_.forAmount:_.againstAmount)+" ",1),"For"==_.title?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",U,Object(c["toDisplayString"])(_.forAmount>0?"Addresses":"Address"),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",H,Object(c["toDisplayString"])(_.againstAmount>0?"Addresses":"Address"),1))]),z]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(le(_.list),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(Object(c["unref"])(r["c"])(e.account)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(Object(c["unref"])(r["l"])(e.share,Object(c["unref"])(d["a"]).price)),1)]))),128))])])]),_:1},8,["modelValue"]),Object(c["createVNode"])(u,{modelValue:X.vote,"onUpdate:modelValue":a[11]||(a[11]=e=>X.vote=e),width:"464px"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",q,[$,Object(c["createElementVNode"])("form",{onSubmit:a[10]||(a[10]=Object(c["withModifiers"])(()=>{},["prevent"]))},[Object(c["createElementVNode"])("div",Z,[G,Object(c["createElementVNode"])("div",Q,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>_.form.amount=e),type:"text",placeholder:"0"},null,512),[[c["vModelText"],_.form.amount],[ne]]),Object(c["createElementVNode"])("span",{class:"suffix max",onClick:a[8]||(a[8]=()=>{_.form.amount=String(e.availableVoteAmount)})}," MAX ")]),Object(c["createElementVNode"])("div",K,[J,Object(c["createElementVNode"])("span",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(r["d"])(e.totalAmount,2,!0))+" ",1),Object(c["unref"])(ee)>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])("("+Object(c["toDisplayString"])(Object(c["unref"])(r["d"])(Object(c["unref"])(ee),2,!0))+" Locked)",1)],64)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" Vote"+Object(c["toDisplayString"])(Number(e.totalAmount)>1?"s":""),1)])])]),Object(c["createVNode"])(p,{type:"primary",style:{width:"100%",height:"56px"},loading:_.loading.vote,disabled:_.form.voteBtnAllow,onClick:a[9]||(a[9]=e=>oe({..._.form}))},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Submit ")]),_:1},8,["loading","disabled"])],32)])]),_:1},8,["modelValue"])],64)}}}),ee=(a("bc4a"),a("6b0d")),te=a.n(ee);const ae=te()(X,[["__scopeId","data-v-03ce28ba"]]);var ce=ae;const oe=e=>(Object(c["pushScopeId"])("data-v-bc00960e"),e=e(),Object(c["popScopeId"])(),e),le={class:"panel-container"},ne=oe(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Parameters")],-1)),re={class:"panel"},se={class:"left"},ie={class:"param-item"},de=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Token Symbol",-1)),be={class:"content"},ue={class:"param-item"},pe=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Token Contract Address",-1)),je={class:"content"},Oe={class:"param-item"},me=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Leverage",-1)),fe={class:"content"},he={class:"param-item"},ve=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Margin Token",-1)),ge={class:"content"},Ve=oe(()=>Object(c["createElementVNode"])("div",{class:"divide"},null,-1)),ye={class:"right"},Ne={class:"param-item"},ke=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Pool Creator",-1)),Ee={class:"content"},we={class:"param-item hover-dash"},xe=oe(()=>Object(c["createElementVNode"])("div",{class:"label shorter-hover-link"},"Pool Creator’s Premium",-1)),Be={class:"content"},Ce={class:"param-item"},Se=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Max Capacity",-1)),De={class:"content"},Ae={class:"param-item"},Te=oe(()=>Object(c["createElementVNode"])("div",{class:"label"},"Days to Expiration",-1)),Ie={class:"content"};var Pe=Object(c["defineComponent"])({__name:"ProposalParameters",props:{loading:{type:Boolean,default:()=>!0},proposalDetail:{type:Object,default:()=>{}}},setup(e){const t=e,a=Object(c["computed"])(()=>t.loading||o.loading),o=Object(c["reactive"])({describe:"",loading:!1});return(t,o)=>{const l=Object(c["resolveComponent"])("shorterSkeletonItem"),n=Object(c["resolveComponent"])("Image"),s=Object(c["resolveComponent"])("shorterSkeleton");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",le,[ne,Object(c["createElementVNode"])("div",re,[Object(c["createElementVNode"])("div",se,[Object(c["createElementVNode"])("div",ie,[de,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>{var t,a;return[Object(c["createElementVNode"])("div",be,[Object(c["createVNode"])(n,{class:"coin-logo",circle:"",src:null===(t=e.proposalDetail.token)||void 0===t?void 0:t.logoURI},null,8,["src"]),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])((null===(a=e.proposalDetail.token)||void 0===a?void 0:a.symbol)||"-"),1)])]}),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",ue,[pe,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",je,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(r["c"])(e.proposalDetail.tokenContract,7,7)),1)])]),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",Oe,[me,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",fe,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.proposalDetail.leverage)+"×",1)])]),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",he,[ve,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>{var t;return[Object(c["createElementVNode"])("div",ge,[Object(c["createVNode"])(n,{class:"coin-logo",circle:"",src:null===(t=e.proposalDetail.stableToken)||void 0===t?void 0:t.logoURI},null,8,["src"]),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.proposalDetail.stableToken.symbol),1)])]}),_:1},8,["loading"])])]),Ve,Object(c["createElementVNode"])("div",ye,[Object(c["createElementVNode"])("div",Ne,[ke,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",Ee,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(r["c"])(e.proposalDetail.proposer,7,7)),1)])]),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",we,[xe,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",Be,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(Object(c["unref"])(r["k"])(e.proposalDetail.poolCreationFee/1e4))+"%",1)])]),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",Ce,[Se,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>{var t;return[Object(c["createElementVNode"])("div",De,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.proposalDetail.maxCapacity||"Infinite")+" "+Object(c["toDisplayString"])(null===(t=e.proposalDetail.token)||void 0===t?void 0:t.symbol),1)])]}),_:1},8,["loading"])]),Object(c["createElementVNode"])("div",Ae,[Te,Object(c["createVNode"])(s,{loading:Object(c["unref"])(a),animated:"",style:{height:"24px"}},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{style:{width:"160px",height:"22px"}})]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",Ie,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.proposalDetail.durationDays)+" Days",1)])]),_:1},8,["loading"])])])])])}}});a("1445");const _e=te()(Pe,[["__scopeId","data-v-bc00960e"]]);var Re=_e,Le=a("58c9"),Me=a("5eb3"),Fe=a("110c"),Ye=a("60bb");const We=e=>(Object(c["pushScopeId"])("data-v-7b908fe8"),e=e(),Object(c["popScopeId"])(),e),Ue={class:"panel-container"},He=We(()=>Object(c["createElementVNode"])("header",{class:"panel-header"},[Object(c["createElementVNode"])("h4",{class:"panel-title"},"Proposal Timeline")],-1)),ze={class:"panel"},qe={key:0},$e={class:"main"},Ze={key:0},Ge={key:1},Qe={class:"date"},Ke=["onClick"],Je=We(()=>Object(c["createElementVNode"])("svg",{class:"shorter-icon","aria-hidden":"true"},[Object(c["createElementVNode"])("use",{"xlink:href":"#icon-share"})],-1)),Xe=[Je],et={key:1},tt=We(()=>Object(c["createElementVNode"])("br",null,null,-1));var at=Object(c["defineComponent"])({__name:"ProposalHistory",props:{history:{type:Array,default:()=>[]},creator:{type:String,default:""},loading:{type:Boolean,default:()=>!0}},setup(e){function t(e){e?Object(Fe["c"])(e,"tx","onBrowser"):s["a"].warning("Unavailable transaction data")}return(a,o)=>{const l=Object(c["resolveComponent"])("CircleCheckFilled"),n=Object(c["resolveComponent"])("shorterSkeletonItem"),r=Object(c["resolveComponent"])("shorterSkeleton");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ue,[He,Object(c["createElementVNode"])("div",ze,[e.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",et,[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(3,e=>Object(c["createElementVNode"])("li",{key:e},[Object(c["createVNode"])(r,{height:"42px",animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{style:{width:"30%",height:"20px"}}),tt,Object(c["createVNode"])(n,{style:{width:"60%",height:"20px","margin-top":"6px","margin-bottom":"20px"}})]),_:1})])),64))])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",qe,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.history,(e,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:a,class:"history-item active"},[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["icon",2==e.status?"error":"success"])},[Object(c["createVNode"])(l)],2),Object(c["createElementVNode"])("div",$e,[e.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ze,Object(c["toDisplayString"])(Object(c["unref"])(Le["d"])(e.status)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Ge," Created ")),Object(c["createElementVNode"])("div",Qe,Object(c["toDisplayString"])(Object(c["unref"])(Me["a"])(e.time))+" ("+Object(c["toDisplayString"])(Object(c["unref"])(Ye["a"]).text)+")",1)]),e.hash?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:"link",onClick:a=>t(e.hash)},Xe,8,Ke)):Object(c["createCommentVNode"])("",!0)]))),128))]))])])}}});a("fc4d");const ct=te()(at,[["__scopeId","data-v-7b908fe8"]]);var ot=ct,lt=a("c89c"),nt=a("3d2e"),rt=a("b377"),st=a("4fed"),it=a("6779"),dt=a("0c89");const bt=e=>(Object(c["pushScopeId"])("data-v-42d13384"),e=e(),Object(c["popScopeId"])(),e),ut={class:"title"},pt={key:0,class:"content"},jt=bt(()=>Object(c["createElementVNode"])("div",{class:"back-img"},null,-1)),Ot={key:2,class:"addition"},mt=["innerHTML"],ft={class:"panel-group"};var ht=Object(c["defineComponent"])({__name:"ProposalDetail",setup(e){const t=Object(o["e"])(),a=Object(o["d"])(),l=Object(c["reactive"])({totalAmount:0,availableVoteAmount:0,proposalDetail:{leverage:null,durationDays:null,proposer:null,status:null,tag:null,tokenContract:null,startBlock:null,endBlock:null,maxCapacity:null,totalVotes:null,forPercent:null,againstPercent:null,token:{symbol:null,logoURI:null},stableToken:{symbol:null,logoURI:null},poolCreationFee:0},loading:{fetchDetail:!0,fetchHistory:!0,fetchVotes:!1},history:[],lastTime:"",votesResult:{forList:[],againstList:[]}}),r=Object(c["computed"])(()=>{var e,t;return null!==(e=l.proposalDetail.token)&&void 0!==e&&e.symbol?Object(Le["b"])(null===(t=l.proposalDetail.token)||void 0===t?void 0:t.symbol,l.proposalDetail.leverage):""}),s=Object(c["computed"])(()=>a.params.id),d=Object(c["computed"])(()=>l.proposalDetail.startBlock);function b(){j(),h(i["a"].value)}async function p(){const e=await Object(rt["c"])(),t=l.proposalDetail.endBlock;return!t||t>e?e:t}async function j(){try{l.loading.fetchDetail=!0;const e=await n["e"](s.value);if("0x0000000000000000000000000000000000000000"==(null===e||void 0===e?void 0:e.proposer)||"0x0000000000000000000000000000000000000000"==(null===e||void 0===e?void 0:e.tokenContract))return void t.replace({name:"404",query:a.query});l.proposalDetail=e,O(),f(l.proposalDetail.status)}catch(e){}finally{l.loading.fetchDetail=!1}}async function O(){if(s.value)try{l.loading.fetchVotes=!0;const e=await Object(dt["g"])(s.value)||[],t=_.max(e.map(e=>e.blockNumber)),a=t?Number(t)+1:d.value,c=await m(Number(a+1)),o=_.concat(e||[],c||[]);if(!_.isArray(o))return;const n=o.filter(e=>1===Number(e.direction)),r=o.filter(e=>1!==Number(e.direction));l.votesResult.forList=n,l.votesResult.againstList=r}finally{l.loading.fetchVotes=!1}}async function m(e){const t=await p(),a=await n["j"](e,t,s.value)||[];if(!_.isArray(a))return;const c=a.map(e=>{const t={proposalId:1*u["a"](e.args.proposalId),direction:u["a"](e.args.direction),account:u["a"](e.args.user),share:u["b"](e.args.voteShare),share_big:e.args.voteShare};return t});return c}async function f(e){if(s.value){l.loading.fetchHistory=!0;try{const t=await Object(rt["b"])(d.value,"MMM DD, YYYY HH:mm");let a=[{status:0,time:t,hash:null}];const[c,o]=[Object(st["b"])(nt,"PoolProposalCreated")||[],Object(st["b"])(nt,"ProposalStatusChanged")||[]],r=new it["utils"].AbiCoder;c.push(r.encode(["uint256"],[s.value])),o.push(r.encode(["uint256"],[s.value]));const i=await p(),b={fromBlock:d.value,toBlock:i,topics:c},j={fromBlock:d.value,toBlock:i,topics:o};if(0===e){l.lastTime=t;const e=await n["c"](b)||[{}];a[0].hash=(e[0]||{}).hash}else{const[e,t]=await Promise.all([n["c"](b)||[{}],n["c"](j)||[{}]]);a[0].hash=(e[0]||{}).hash;const c=await Promise.all(t.map(async e=>(e.status=u["a"](e.args.ps),e.time=await Object(rt["b"])(e.blockNumber,"MMM DD, YYYY HH:mm"),e)));a=[...a,...c],l.lastTime=a[a.length-1].time}l.history=a}catch(t){}finally{l.loading.fetchHistory=!1}}}async function h(e){const t=await n["i"](e),{totalShare:a,availableShare:c}=t||{};l.availableVoteAmount=c,l.totalAmount=a}return Object(c["onBeforeMount"])(()=>{j()}),Object(c["watchEffect"])(()=>{i["a"].value&&h(i["a"].value)}),(e,t)=>{const a=Object(c["resolveComponent"])("shorterSkeletonItem"),o=Object(c["resolveComponent"])("shorterSkeleton"),n=Object(c["resolveComponent"])("Tag"),s=Object(c["resolveComponent"])("Layout");return Object(c["openBlock"])(),Object(c["createBlock"])(s,{back:{name:"Proposals",breadcrumb:["Governance","Proposals"]}},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",ut,[!l.loading.fetchDetail&&Object(c["unref"])(r)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",pt,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(r))+" ",1),Object(c["createVNode"])(lt["a"],{class:"status",status:Object(c["unref"])(Le["f"])(l.proposalDetail.status).toLowerCase()},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(Le["f"])(l.proposalDetail.status)),1)]),_:1},8,["status"])])):(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:1,height:"37px",animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{style:{width:"80%",height:"37px"}})]),_:1})),jt,l.loading.fetchHistory||l.loading.fetchDetail?(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:3,height:"24px",animated:""},{template:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{style:{width:"40%",height:"24px","margin-top":"14px"}})]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ot,[l.proposalDetail?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,class:"subtitle-tag",color:"white"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(Le["e"])(l.proposalDetail.tag)),1)]),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",{innerHTML:Object(c["unref"])(Le["a"])(l.proposalDetail.status,l.lastTime)},null,8,mt)]))])]),default:Object(c["withCtx"])(()=>{var e;return[Object(c["createVNode"])(ce,{loading:l.loading.fetchDetail||l.loading.fetchVotes,"total-amount":l.totalAmount,"available-vote-amount":l.availableVoteAmount,"proposal-detail":l.proposalDetail,"for-list":l.votesResult.forList,"against-list":l.votesResult.againstList,onRefreshData:b},null,8,["loading","total-amount","available-vote-amount","proposal-detail","for-list","against-list"]),Object(c["createElementVNode"])("div",ft,[Object(c["createVNode"])(Re,{loading:l.loading.fetchDetail,"proposal-detail":l.proposalDetail,class:"type"},null,8,["loading","proposal-detail"]),Object(c["createVNode"])(ot,{class:"history",creator:null===(e=l.proposalDetail)||void 0===e?void 0:e.proposer,loading:l.loading.fetchDetail||l.loading.fetchHistory,history:l.history},null,8,["creator","loading","history"])])]}),_:1})}}});a("4fd2");const vt=te()(ht,[["__scopeId","data-v-42d13384"]]);t["default"]=vt},e15f:function(e,t,a){},e65c:function(e,t,a){"use strict";a("a662")},ee46:function(e,t,a){"use strict";a("fedb")},f44d:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("fae1"),o=a("05ac");function l(e){return c["a"].post(Object(o["a"])().graphqlUrl,e)}},f565:function(e,t,a){"use strict";a("9c29")},f799:function(e,t,a){},fc4d:function(e,t,a){"use strict";a("9bb2")},fedb:function(e,t,a){}}]);